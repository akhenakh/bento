<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/migration/v4" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Migrating to Version 4 | Bento</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://www.benthos.dev/img/og_img.png"><meta data-rh="true" name="twitter:image" content="https://www.benthos.dev/img/og_img.png"><meta data-rh="true" property="og:url" content="https://www.benthos.dev/docs/guides/migration/v4"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="benthos, stream processor, data engineering, ETL, ELT, event processor, go, golang"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migrating to Version 4 | Bento"><meta data-rh="true" name="description" content="Bento has been at major version 3 for more than two years, during which time it has gained a huge amount of functionality without introducing any breaking changes. However, the number of components, APIs and features that have been deprecated in favour of better solutions has grown steadily and the time has finally come to purge them. There are also some areas of functionality that have been improved with breaking changes."><meta data-rh="true" property="og:description" content="Bento has been at major version 3 for more than two years, during which time it has gained a huge amount of functionality without introducing any breaking changes. However, the number of components, APIs and features that have been deprecated in favour of better solutions has grown steadily and the time has finally come to purge them. There are also some areas of functionality that have been improved with breaking changes."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.benthos.dev/docs/guides/migration/v4"><link data-rh="true" rel="alternate" href="https://www.benthos.dev/docs/guides/migration/v4" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.benthos.dev/docs/guides/migration/v4" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WBY9Z65YR4-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Bento RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Bento Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Bento JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Bento" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.46683ea7.css">
<script src="/assets/js/runtime~main.cb84cd5a.js" defer="defer"></script>
<script src="/assets/js/main.11ce2afc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-color-primary);color:var(--ifm-background-color)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong>Hey, ü´µ you, make sure you've <a target="_blank" rel="noopener noreferrer" href="https://github.com/warpstreamlabs/bento">‚≠ê starred the repo ‚≠ê</a> otherwise you won't be entered into our daily prize draw for silent admiration.</strong></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Bento" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Bento" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Bento</b></a><a class="navbar__item navbar__link" href="/docs/about">Docs</a><a class="navbar__item navbar__link" href="/cookbooks">Cookbooks</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/support">Support</a><a href="https://github.com/warpstreamlabs/bento/releases/latest" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-download-link header-icon-link" aria-label="Download"></a><a href="https://github.com/warpstreamlabs/bento" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link header-icon-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/about">About</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/configuration/about">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/components/about">Components</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/guides/getting_started">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/getting_started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/bloblang/about">Bloblang</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/performance_tuning">Performance Tuning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/sync_responses">Synchronous Responses</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/cloud/aws">Cloud Credentials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/serverless/about">Serverless</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/guides/streams_mode/about">Streams Mode</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/guides/migration/v4">Migration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/migration/v4">Migrating to Version 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/migration/v3">Migrating to Version 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/migration/v2">Migrating to Version 2</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Guides</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Migration</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Migrating to Version 4</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Migrating to Version 4</h1></header><p>Bento has been at major version 3 <a href="/blog/2021/01/04/v4-roadmap">for more than two years</a>, during which time it has gained a huge amount of functionality without introducing any breaking changes. However, the number of components, APIs and features that have been deprecated in favour of better solutions has grown steadily and the time has finally come to purge them. There are also some areas of functionality that have been improved with breaking changes.</p>
<p>This document outlines the changes made to Bento since V3 and tips for how to migrate to V4 in places where those changes are significant.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deprecated-components-removed">Deprecated Components Removed<a href="#deprecated-components-removed" class="hash-link" aria-label="Direct link to Deprecated Components Removed" title="Direct link to Deprecated Components Removed">‚Äã</a></h2>
<p>All components, features and configuration fields that were marked as deprecated in the latest release of V3 have been removed in V4. In order to detect deprecated components or fields within your existing configuration files you can run the linter from a later release of V3 Bento with the <code>--deprecated</code> flag:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bento lint --deprecated ./configs/*.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This should report all remaining deprecated components. All deprecated components have favoured alternative solutions in V3, so it should be possible to slowly eliminate deprecated aspects of your config using V3 before upgrading.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unit-test-directories">Unit test directories<a href="#unit-test-directories" class="hash-link" aria-label="Direct link to Unit test directories" title="Direct link to Unit test directories">‚Äã</a></h3>
<p>The <code>bento test</code> subcommand no longer walks paths when they are directories. Instead use explicit triple-dot syntax (<code>./dir/...</code>) or wildcard patterns.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-go-module-name">New Go Module Name<a href="#new-go-module-name" class="hash-link" aria-label="Direct link to New Go Module Name" title="Direct link to New Go Module Name">‚Äã</a></h2>
<p>For users of the Go plugin APIs the import path of this module needs to be updated to <code>github.com/warpstreamlabs/bento/v4</code>, like so:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/warpstreamlabs/bento/v4/public/service&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulsar-components-disabled-for-now">Pulsar Components Disabled (for now)<a href="#pulsar-components-disabled-for-now" class="hash-link" aria-label="Direct link to Pulsar Components Disabled (for now)" title="Direct link to Pulsar Components Disabled (for now)">‚Äã</a></h2>
<p>There have been multiple issues with the Go Pulsar client libraries. Since some are still outstanding and causing problems with unrelated components the decision has been made to remove the <code>pulsar</code> input and output from standard builds. However, it is still possible to build custom versions of Bento with them included by importing the package <code>./public/components/pulsar</code>:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;context&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;github.com/warpstreamlabs/bento/v3/public/service&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Import all plugins defined within the repo.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/warpstreamlabs/bento/v4/public/components/all&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;github.com/warpstreamlabs/bento/v4/public/components/pulsar&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">RunCLI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Background</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pipeline-threads-behaviour-change">Pipeline Threads Behaviour Change<a href="#pipeline-threads-behaviour-change" class="hash-link" aria-label="Direct link to Pipeline Threads Behaviour Change" title="Direct link to Pipeline Threads Behaviour Change">‚Äã</a></h2>
<p><a href="https://github.com/warpstreamlabs/bento/issues/399" target="_blank" rel="noopener noreferrer">https://github.com/warpstreamlabs/bento/issues/399</a></p>
<p>In V3 the <code>pipeline.threads</code> field defaults to 1. If this field is explicitly set to <code>0</code> it will automatically match the number of CPUs on the host machine. In V4 this will change so that the default value of <code>pipeline.threads</code> is <code>-1</code>, where this value indicates we should match the number of host CPUs. An explicit value of <code>0</code> is still considered valid and functionally equivalent to <code>-1</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="old-style-interpolation-functions-removed">Old Style Interpolation Functions Removed<a href="#old-style-interpolation-functions-removed" class="hash-link" aria-label="Direct link to Old Style Interpolation Functions Removed" title="Direct link to Old Style Interpolation Functions Removed">‚Äã</a></h2>
<p>The original style of interpolation functions, where you specify a function name followed by a colon and then any arguments (<code>${!json:foo,1}</code>) has been deprecated (and undocumented) for a while now. What we&#x27;ve had instead is a subset of Bloblang allowing you to use functions directly (<code>${! json(&quot;foo&quot;).from(1) }</code>), but with the old style still supported for backwards compatibility.</p>
<p>However, supporting the old style means our parsing capabilities are weakened and so it is now removed in order to allow more powerful interpolations in the future.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bloblang-changes">Bloblang Changes<a href="#bloblang-changes" class="hash-link" aria-label="Direct link to Bloblang Changes" title="Direct link to Bloblang Changes">‚Äã</a></h2>
<p><a href="https://github.com/warpstreamlabs/bento/issues/571" target="_blank" rel="noopener noreferrer">https://github.com/warpstreamlabs/bento/issues/571</a></p>
<p>The functions <code>meta</code>, <code>root_meta</code>, <code>error</code> and <code>env</code> now return <code>null</code> when the target value does not exist. This is in order to improve consistency across different functions and query types. In cases where a default empty string is preferred you can add <code>.or(&quot;&quot;)</code> onto the function. In cases where you want to throw an error when the value does not exist you can add <code>.not_null()</code> onto the function.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="root-referencing">Root referencing<a href="#root-referencing" class="hash-link" aria-label="Direct link to Root referencing" title="Direct link to Root referencing">‚Äã</a></h3>
<p>It is now possible to reference the <code>root</code> of the document being created within a mapping query, i.e. <code>root.hash = root.string().hash(&quot;xxhash64&quot;)</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="env-var-docker-configuration">Env Var Docker Configuration<a href="#env-var-docker-configuration" class="hash-link" aria-label="Direct link to Env Var Docker Configuration" title="Direct link to Env Var Docker Configuration">‚Äã</a></h2>
<p>Docker builds will no longer come with a default config that contains generated environment variables. This system doesn&#x27;t scale at all for complex configuration files and was becoming a challenge to maintain (and also huge). Instead, the new <code>-s</code> flag has been the preferred way to configure Bento through arguments and will need to be used exclusively in V4.</p>
<p>It&#x27;s worth noting that this does not prevent you from defining your own env var based configuration and adding that to your docker image. It&#x27;s entirely possible to copy the config from V3 and have that work, it just won&#x27;t be present by default any more.</p>
<p>In order to migrate to the <code>-s</code> flag use the path of the fields you&#x27;re setting instead of the generated environment variables, so:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -p 4195:4195 warpstreamlabs/bento \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	-e &quot;INPUT_TYPE=http_server&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	-e &quot;OUTPUT_TYPE=kafka&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	-e &quot;OUTPUT_KAFKA_ADDRESSES=kafka-server:9092&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	-e &quot;OUTPUT_KAFKA_TOPIC=bento_topic&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Becomes:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -p 4195:4195 warpstreamlabs/bento \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s &quot;input.type=http_server&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s &quot;output.type=kafka&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s &quot;output.kafka.addresses=kafka-server:9092&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s &quot;output.kafka.topic=bento_topic&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="old-plugin-apis-removed">Old Plugin APIs Removed<a href="#old-plugin-apis-removed" class="hash-link" aria-label="Direct link to Old Plugin APIs Removed" title="Direct link to Old Plugin APIs Removed">‚Äã</a></h2>
<p>Any packages from within the <code>lib</code> directory have been removed. Please use only the APIs within the <code>public</code> directory, the API docs count be found on <a href="https://pkg.go.dev/github.com/warpstreamlabs/bento/v4/public" target="_blank" rel="noopener noreferrer">pkg.go.dev</a>, and examples can be found in the <a href="https://github.com/warpstreamlabs/bento-plugin-example" target="_blank" rel="noopener noreferrer"><code>benthos-plugin-example</code> repository</a>. These new APIs can be found in V3 so if you have many components you can migrate them incrementally by sticking with V3 until completion.</p>
<p>Many of the old packages within <code>lib</code> can also still be found within <code>internal</code>, if you&#x27;re in a pickle you can find some of those APIs and copy/paste them into your own repository.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="caches">Caches<a href="#caches" class="hash-link" aria-label="Direct link to Caches" title="Direct link to Caches">‚Äã</a></h2>
<p>All caches that support retries have had their retry/backoff configuration fields modified in order to be more consistent. The new common format is:</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">retries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">initial_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">max_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">max_elapsed_time</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 30s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In cases where it might be desirable to disable retries altogether (the <code>ristretto</code> cache) there is also an <code>enabled</code> field.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ttl-changes">TTL changes<a href="#ttl-changes" class="hash-link" aria-label="Direct link to TTL changes" title="Direct link to TTL changes">‚Äã</a></h3>
<p>Caches that support TTLs have had their <code>ttl</code> fields renamed to <code>default_ttl</code> in order to make it clearer that their purpose is to provide a fallback. All of these values are now duration string types, i.e. a cache with an integer seconds based field with a previous value of <code>60</code> should now be defined as <code>60s</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="field-default-changes">Field Default Changes<a href="#field-default-changes" class="hash-link" aria-label="Direct link to Field Default Changes" title="Direct link to Field Default Changes">‚Äã</a></h2>
<p><a href="https://github.com/warpstreamlabs/bento/issues/392" target="_blank" rel="noopener noreferrer">https://github.com/warpstreamlabs/bento/issues/392</a></p>
<p>Lots of fields have had default values removed in cases where they were deemed unlikely to be useful and likely to cause frustration. This specifically applies to any <code>url</code>, <code>urls</code>, <code>address</code> or <code>addresses</code> fields that may have once had a default value containing a common example for the particular service. In most cases this should cause minimal disruption as the field is non-optional and therefore not specifying it explicitly will result in config errors.</p>
<p>However, there are the following exceptions that are worth noting:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-http-processor-and-http_client-output-no-longer-create-multipart-requests-by-default">The <code>http</code> processor and <code>http_client</code> output no longer create multipart requests by default<a href="#the-http-processor-and-http_client-output-no-longer-create-multipart-requests-by-default" class="hash-link" aria-label="Direct link to the-http-processor-and-http_client-output-no-longer-create-multipart-requests-by-default" title="Direct link to the-http-processor-and-http_client-output-no-longer-create-multipart-requests-by-default">‚Äã</a></h3>
<p>The <code>http</code> processor and <code>http_client</code> output now execute message batch requests as individual requests by default. This behaviour can be disabled by explicitly setting <code>batch_as_multipart</code> to <code>true</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="output-lines-codec-no-longer-adds-extra-batch-newlines">Output <code>lines</code> codec no longer adds extra batch newlines<a href="#output-lines-codec-no-longer-adds-extra-batch-newlines" class="hash-link" aria-label="Direct link to output-lines-codec-no-longer-adds-extra-batch-newlines" title="Direct link to output-lines-codec-no-longer-adds-extra-batch-newlines">‚Äã</a></h3>
<p>All outputs that traditionally wrote empty newlines at the end of batches with &gt;1 message when using the <code>lines</code> codec (<code>socket</code>, <code>stdout</code>, <code>file</code>, <code>sftp</code>) no longer do this by default. This was originally kept for backwards compatibility but was often seen as an unexpected and annoying behaviour.</p>
<p>It is still possible to add these end-of-batch newlines in a more consistent way by either adding an empty message to the end of batches, or by adding a newline to the last message of the batch.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-switch-output-retry_until_success">The <code>switch</code> output <code>retry_until_success</code><a href="#the-switch-output-retry_until_success" class="hash-link" aria-label="Direct link to the-switch-output-retry_until_success" title="Direct link to the-switch-output-retry_until_success">‚Äã</a></h3>
<p>By default the <code>switch</code> output continues retrying switch case outputs until success. This default was sensible at the time as we didn&#x27;t have a concept of intentionally nacking messages, and therefore a nacked message was likely a recoverable problem and retrying internally means that messages matching multiple cases wouldn&#x27;t produce duplicates.</p>
<p>However, since then Bento has evolved and a very common pattern with the <code>switch</code> output is to reject messages that failed during processing using the <code>reject</code> output. But because of the default value of <code>retry_until_success</code> many users end up in a confusing situation where using a <code>reject</code> output results in the pipeline blocking indefinitely until they discover this field.</p>
<p>Therefore the default value of <code>retry_until_success</code> will now be <code>false</code>, which means users that aren&#x27;t using a <code>reject</code> flow in one of their switch cases, and have a configuration where messages could match multiple cases, should explicitly set this field to <code>true</code> in order to avoid potential duplicates during downstream outages.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws-region-fields">AWS <code>region</code> fields<a href="#aws-region-fields" class="hash-link" aria-label="Direct link to aws-region-fields" title="Direct link to aws-region-fields">‚Äã</a></h3>
<p><a href="https://github.com/warpstreamlabs/bento/issues/696" target="_blank" rel="noopener noreferrer">https://github.com/warpstreamlabs/bento/issues/696</a></p>
<p>Any configuration sections containing AWS fields no longer have a default <code>region</code> of <code>eu-west-1</code>. Instead, the field will be empty by default, where unless explicitly set the environment variable <code>AWS_REGION</code> will be used. This will cause problems for users where they expect the region <code>eu-west-1</code> to be targeted when neither the field nor the environment variable <code>AWS_REGION</code> are set.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="clickhouse-driver-changes">Clickhouse Driver Changes<a href="#clickhouse-driver-changes" class="hash-link" aria-label="Direct link to Clickhouse Driver Changes" title="Direct link to Clickhouse Driver Changes">‚Äã</a></h2>
<p>The <code>clickhouse</code> SQL driver Data Source Name format parameters have been changed due to a client library update (details can be found at <a href="https://github.com/ClickHouse/clickhouse-go" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse/clickhouse-go</a>). A compatibility layer has been added that makes a best attempt to translate the old DSN format to the new one, but some parameters may not carry over exactly.</p>
<p>This update also means placeholders in <code>sql_raw</code> queries should be in dollar syntax.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="serverless-default-output">Serverless Default Output<a href="#serverless-default-output" class="hash-link" aria-label="Direct link to Serverless Default Output" title="Direct link to Serverless Default Output">‚Äã</a></h2>
<p>The default output of the serverless distribution of Bento is now the following config:</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">output</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">switch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">retry_until_success</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> errored()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">output</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">reject</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;processing failed due to: ${! error() }&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">output</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">sync_response</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This change was made in order to return processing errors directly to the invoker by default.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-changes">Metrics Changes<a href="#metrics-changes" class="hash-link" aria-label="Direct link to Metrics Changes" title="Direct link to Metrics Changes">‚Äã</a></h2>
<p><a href="https://github.com/warpstreamlabs/bento/issues/1066" target="_blank" rel="noopener noreferrer">https://github.com/warpstreamlabs/bento/issues/1066</a></p>
<p>The metrics produced by a Bento stream have been greatly simplified and now make better use of labels/tags in order to provide component-specific insights. The configuration and behaviour of metrics types has also been made more consistent, with metric names being the same throughout and <code>mapping</code> now being a general top-level field.</p>
<p>For a full overview of the new system check out the <a href="/docs/components/metrics/about">metrics about page</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="field-prefix-is-gone">Field <code>prefix</code> is gone<a href="#field-prefix-is-gone" class="hash-link" aria-label="Direct link to field-prefix-is-gone" title="Direct link to field-prefix-is-gone">‚Äã</a></h3>
<p>Some metrics components such as <code>prometheus</code> had a <code>prefix</code> field for setting a prefix to all metric names. These fields are now gone, if you want to reintroduce these prefixes you can use the general purpose <code>mapping</code> field. For example, if we previously had a config:</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">prefix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">METRICS_PREFIX</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">bento</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We need to delete that prefix and add a mapping that renames metric names:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mapping</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root = env(&quot;METRICS_PREFIX&quot;).or(&quot;bento&quot;) + &quot;_&quot; + this&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-http_server-type-renamed-to-json_api">The <code>http_server</code> type renamed to <code>json_api</code><a href="#the-http_server-type-renamed-to-json_api" class="hash-link" aria-label="Direct link to the-http_server-type-renamed-to-json_api" title="Direct link to the-http_server-type-renamed-to-json_api">‚Äã</a></h3>
<p>The name given to the generic JSON API metrics type was <code>http_server</code>, which was confusing as it isn&#x27;t the only metrics output type that presents as an HTTP server endpoint. This type was also only originally intended for local debugging, which the <code>prometheus</code> type is also good for.</p>
<p>In order to distinguish this metrics type by its unique feature, which is that it exposes metrics as a JSON object, it has been renamed to <code>json_api</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-stdout-type-renamed-to-logger">The <code>stdout</code> type renamed to <code>logger</code><a href="#the-stdout-type-renamed-to-logger" class="hash-link" aria-label="Direct link to the-stdout-type-renamed-to-logger" title="Direct link to the-stdout-type-renamed-to-logger">‚Äã</a></h3>
<p>The <code>stdout</code> metrics type now emits metrics using the Bento logger, and therefore also matches the logger format. As such, it has been renamed to <code>logger</code> in order to reflect that.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="no-more-dots">No more dots<a href="#no-more-dots" class="hash-link" aria-label="Direct link to No more dots" title="Direct link to No more dots">‚Äã</a></h3>
<p>In V3 metrics names contained dots in order to represent pseudo-paths of the source component. In V4 all metric names produced by Bento have been changed to contain only alpha-numeric characters and underscores. It is recommended that any custom metric names produced by your <code>metric</code> processors and custom plugins should match this new format for consistency.</p>
<p>Since dots were invalid characters in Prometheus metric names, in V3 the <code>prometheus</code> metrics type made some automatic modifications to all names before registering them. This rewrite first replaced all <code>-</code> and <code>_</code> characters to a double underscore (<code>__</code>), and then replaced all <code>.</code> characters with <code>_</code>. This was an ugly work around and has been removed in V4, but means in previous cases where custom metrics containing dots were automatically converted you will instead see error logs reporting that the names were invalid and therefore ignored.</p>
<p>If you wish to retain the old rewrite behaviour you can reproduce it with the new <code>mapping</code> field:</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mapping</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root = this.replace(&quot;_&quot;, &quot;__&quot;).replace(&quot;-&quot;, &quot;__&quot;).replace(&quot;.&quot;, &quot;_&quot;)&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, it&#x27;s recommended to change your metric names instead.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tracing-changes">Tracing Changes<a href="#tracing-changes" class="hash-link" aria-label="Direct link to Tracing Changes" title="Direct link to Tracing Changes">‚Äã</a></h2>
<p><a href="https://github.com/warpstreamlabs/bento/issues/872" target="_blank" rel="noopener noreferrer">https://github.com/warpstreamlabs/bento/issues/872</a></p>
<p>Distributed tracing within Bento is now done via the Open Telemetry client library. Unfortunately, this client library does not support the full breadth of options as we had before. As such, the <code>jaeger</code> tracing type now only supports the <code>const</code> sampling type, and the field <code>service_name</code> has been removed.</p>
<p>This will likely mean tracing output will appear different in this release, and if you were relying on code that extracts and interacts with spans from messages in your custom plugins then it will need to be converted to use the official Open Telemetry APIs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="logging-changes">Logging Changes<a href="#logging-changes" class="hash-link" aria-label="Direct link to Logging Changes" title="Direct link to Logging Changes">‚Äã</a></h2>
<p><a href="https://github.com/warpstreamlabs/bento/issues/589" target="_blank" rel="noopener noreferrer">https://github.com/warpstreamlabs/bento/issues/589</a></p>
<p>The <code>logger</code> config section has been simplified, the new default set to <code>logfmt</code>, and the <code>classic</code> format removed. The default value of <code>add_timestamp</code> has also been changed to <code>false</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-max-in-flight">Automatic Max In Flight<a href="#automatic-max-in-flight" class="hash-link" aria-label="Direct link to Automatic Max In Flight" title="Direct link to Automatic Max In Flight">‚Äã</a></h2>
<p>Outputs that compose other outputs (<code>broker</code>, <code>switch</code>, etc) no longer require their own <code>max_in_flight</code> settings as they will automatically saturate their composed outputs. This includes outputs that compose resources.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="processor-batch-behaviour-changes">Processor Batch Behaviour Changes<a href="#processor-batch-behaviour-changes" class="hash-link" aria-label="Direct link to Processor Batch Behaviour Changes" title="Direct link to Processor Batch Behaviour Changes">‚Äã</a></h2>
<p><a href="https://github.com/warpstreamlabs/bento/issues/408" target="_blank" rel="noopener noreferrer">https://github.com/warpstreamlabs/bento/issues/408</a></p>
<p>Some processors that once executed only once per batch have been updated to execute upon each message individually by default. This change has been made because it was felt the individual message case was considerably more common (and intuitive) and that it is possible to satisfy the batch-wide behaviour in other ways that are opt-in, such as by placing the processors within a <code>branch</code> and having your <code>request_map</code> explicit for a single <code>batch_index</code> (i.e. <code>request_map: root = if batch_index() != 0 { deleted() }</code>).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="processor-parts-field-removed">Processor <code>parts</code> field removed<a href="#processor-parts-field-removed" class="hash-link" aria-label="Direct link to processor-parts-field-removed" title="Direct link to processor-parts-field-removed">‚Äã</a></h3>
<p>Many processors previously had a <code>parts</code> field, which allowed you to explicitly list the indexes of a batch to apply the processor to. This field had confusing naming and was rarely used (or even known about). Since that same behaviour can be reproduced by placing the processor within a <code>branch</code> (or <code>switch</code>) all <code>parts</code> fields have been removed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dedupe"><code>dedupe</code><a href="#dedupe" class="hash-link" aria-label="Direct link to dedupe" title="Direct link to dedupe">‚Äã</a></h3>
<p>The <code>dedupe</code> processor has been reworked so that it now acts upon individual messages by default. It&#x27;s now mandatory to specify a <code>key</code>, and the <code>parts</code> and <code>hash</code> fields have been removed. Instead, specify full-content hashing with interpolation functions in the <code>key</code> field, e.g. <code>${! content().hash(&quot;xxhash64&quot;) }</code>.</p>
<p>In order to deduplicate an entire batch it is likely easier to use a <code>cache</code> processor with the <code>add</code> operator:</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pipeline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Try and add one message to a cache that identifies the whole batch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          root = if batch_index() == 0 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            this.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          } else { deleted() }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> add</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token tag" style="color:#00009f">!</span><span class="token plain"> content() </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Delete all messages if we failed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mapping</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        root = if errored().from(0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          deleted()</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="log"><code>log</code><a href="#log" class="hash-link" aria-label="Direct link to log" title="Direct link to log">‚Äã</a></h3>
<p>The <code>log</code> processor now executes for every message of batches by default.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sleep"><code>sleep</code><a href="#sleep" class="hash-link" aria-label="Direct link to sleep" title="Direct link to sleep">‚Äã</a></h3>
<p>The <code>sleep</code> processor now executes for every message of batches by default.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="broker-ditto-macro-gone">Broker Ditto Macro Gone<a href="#broker-ditto-macro-gone" class="hash-link" aria-label="Direct link to Broker Ditto Macro Gone" title="Direct link to Broker Ditto Macro Gone">‚Äã</a></h2>
<p>The hidden macro <code>ditto</code> for broker configs is now removed. Use the <code>copies</code> field instead. For some edge cases where <code>copies</code> does not satisfy your requirements you may be better served using <a href="/docs/configuration/templating">configuration templates</a>. If all else fails then please <a href="/community">reach out</a> and we can look into other solutions.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/warpstreamlabs/bento/edit/main/website/docs/guides/migration/v4.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/guides/streams_mode/streams_api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Streams API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/guides/migration/v3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Migrating to Version 3</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deprecated-components-removed" class="table-of-contents__link toc-highlight">Deprecated Components Removed</a><ul><li><a href="#unit-test-directories" class="table-of-contents__link toc-highlight">Unit test directories</a></li></ul></li><li><a href="#new-go-module-name" class="table-of-contents__link toc-highlight">New Go Module Name</a></li><li><a href="#pulsar-components-disabled-for-now" class="table-of-contents__link toc-highlight">Pulsar Components Disabled (for now)</a></li><li><a href="#pipeline-threads-behaviour-change" class="table-of-contents__link toc-highlight">Pipeline Threads Behaviour Change</a></li><li><a href="#old-style-interpolation-functions-removed" class="table-of-contents__link toc-highlight">Old Style Interpolation Functions Removed</a></li><li><a href="#bloblang-changes" class="table-of-contents__link toc-highlight">Bloblang Changes</a><ul><li><a href="#root-referencing" class="table-of-contents__link toc-highlight">Root referencing</a></li></ul></li><li><a href="#env-var-docker-configuration" class="table-of-contents__link toc-highlight">Env Var Docker Configuration</a></li><li><a href="#old-plugin-apis-removed" class="table-of-contents__link toc-highlight">Old Plugin APIs Removed</a></li><li><a href="#caches" class="table-of-contents__link toc-highlight">Caches</a><ul><li><a href="#ttl-changes" class="table-of-contents__link toc-highlight">TTL changes</a></li></ul></li><li><a href="#field-default-changes" class="table-of-contents__link toc-highlight">Field Default Changes</a><ul><li><a href="#the-http-processor-and-http_client-output-no-longer-create-multipart-requests-by-default" class="table-of-contents__link toc-highlight">The <code>http</code> processor and <code>http_client</code> output no longer create multipart requests by default</a></li><li><a href="#output-lines-codec-no-longer-adds-extra-batch-newlines" class="table-of-contents__link toc-highlight">Output <code>lines</code> codec no longer adds extra batch newlines</a></li><li><a href="#the-switch-output-retry_until_success" class="table-of-contents__link toc-highlight">The <code>switch</code> output <code>retry_until_success</code></a></li><li><a href="#aws-region-fields" class="table-of-contents__link toc-highlight">AWS <code>region</code> fields</a></li></ul></li><li><a href="#clickhouse-driver-changes" class="table-of-contents__link toc-highlight">Clickhouse Driver Changes</a></li><li><a href="#serverless-default-output" class="table-of-contents__link toc-highlight">Serverless Default Output</a></li><li><a href="#metrics-changes" class="table-of-contents__link toc-highlight">Metrics Changes</a><ul><li><a href="#field-prefix-is-gone" class="table-of-contents__link toc-highlight">Field <code>prefix</code> is gone</a></li><li><a href="#the-http_server-type-renamed-to-json_api" class="table-of-contents__link toc-highlight">The <code>http_server</code> type renamed to <code>json_api</code></a></li><li><a href="#the-stdout-type-renamed-to-logger" class="table-of-contents__link toc-highlight">The <code>stdout</code> type renamed to <code>logger</code></a></li><li><a href="#no-more-dots" class="table-of-contents__link toc-highlight">No more dots</a></li></ul></li><li><a href="#tracing-changes" class="table-of-contents__link toc-highlight">Tracing Changes</a></li><li><a href="#logging-changes" class="table-of-contents__link toc-highlight">Logging Changes</a></li><li><a href="#automatic-max-in-flight" class="table-of-contents__link toc-highlight">Automatic Max In Flight</a></li><li><a href="#processor-batch-behaviour-changes" class="table-of-contents__link toc-highlight">Processor Batch Behaviour Changes</a><ul><li><a href="#processor-parts-field-removed" class="table-of-contents__link toc-highlight">Processor <code>parts</code> field removed</a></li><li><a href="#dedupe" class="table-of-contents__link toc-highlight"><code>dedupe</code></a></li><li><a href="#log" class="table-of-contents__link toc-highlight"><code>log</code></a></li><li><a href="#sleep" class="table-of-contents__link toc-highlight"><code>sleep</code></a></li></ul></li><li><a href="#broker-ditto-macro-gone" class="table-of-contents__link toc-highlight">Broker Ditto Macro Gone</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Help</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/support">Support</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/guides/getting_started">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/videos">Videos</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/warpstreamlabs/bento" target="_blank" rel="noopener noreferrer" class="footer__link-item">See the Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2024 WarpStream Labs. Portions used under MIT License from Ashley Jeffs.</div></div></div></footer></div>
</body>
</html>