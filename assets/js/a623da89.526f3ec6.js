"use strict";(self.webpackChunkbento=self.webpackChunkbento||[]).push([[3131],{4642:function(e,n,a){a.r(n),a.d(n,{assets:function(){return l},contentTitle:function(){return t},default:function(){return h},frontMatter:function(){return s},metadata:function(){return o},toc:function(){return d}});var r=a(85893),i=a(11151);a(74866),a(85162);const s={title:"Bloblang Functions",sidebar_label:"Functions",description:"A list of Bloblang functions"},t=void 0,o={id:"guides/bloblang/functions",title:"Bloblang Functions",description:"A list of Bloblang functions",source:"@site/docs/guides/bloblang/functions.md",sourceDirName:"guides/bloblang",slug:"/guides/bloblang/functions",permalink:"/docs/guides/bloblang/functions",draft:!1,unlisted:!1,editUrl:"https://github.com/warpstreamlabs/bento/edit/main/website/docs/guides/bloblang/functions.md",tags:[],version:"current",frontMatter:{title:"Bloblang Functions",sidebar_label:"Functions",description:"A list of Bloblang functions"},sidebar:"docs",previous:{title:"Walkthrough",permalink:"/docs/guides/bloblang/walkthrough"},next:{title:"Methods",permalink:"/docs/guides/bloblang/methods"}},l={},d=[{value:"General",id:"general",level:2},{value:"<code>counter</code>",id:"counter",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Examples",id:"examples",level:4},{value:"<code>deleted</code>",id:"deleted",level:3},{value:"Examples",id:"examples-1",level:4},{value:"<code>ksuid</code>",id:"ksuid",level:3},{value:"Examples",id:"examples-2",level:4},{value:"<code>nanoid</code>",id:"nanoid",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Examples",id:"examples-3",level:4},{value:"<code>random_int</code>",id:"random_int",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"Examples",id:"examples-4",level:4},{value:"<code>range</code>",id:"range",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"Examples",id:"examples-5",level:4},{value:"<code>snowflake_id</code>",id:"snowflake_id",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"Examples",id:"examples-6",level:4},{value:"<code>throw</code>",id:"throw",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"Examples",id:"examples-7",level:4},{value:"<code>ulid</code>",id:"ulid",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"Examples",id:"examples-8",level:4},{value:"<code>uuid_v4</code>",id:"uuid_v4",level:3},{value:"Examples",id:"examples-9",level:4},{value:"Message Info",id:"message-info",level:2},{value:"<code>batch_index</code>",id:"batch_index",level:3},{value:"Examples",id:"examples-10",level:4},{value:"<code>batch_size</code>",id:"batch_size",level:3},{value:"Examples",id:"examples-11",level:4},{value:"<code>content</code>",id:"content",level:3},{value:"Examples",id:"examples-12",level:4},{value:"<code>error</code>",id:"error",level:3},{value:"Examples",id:"examples-13",level:4},{value:"<code>errored</code>",id:"errored",level:3},{value:"Examples",id:"examples-14",level:4},{value:"<code>json</code>",id:"json",level:3},{value:"Parameters",id:"parameters-7",level:4},{value:"Examples",id:"examples-15",level:4},{value:"<code>metadata</code>",id:"metadata",level:3},{value:"Parameters",id:"parameters-8",level:4},{value:"Examples",id:"examples-16",level:4},{value:"<code>tracing_id</code>",id:"tracing_id",level:3},{value:"Examples",id:"examples-17",level:4},{value:"<code>tracing_span</code>",id:"tracing_span",level:3},{value:"Examples",id:"examples-18",level:4},{value:"Environment",id:"environment",level:2},{value:"<code>env</code>",id:"env",level:3},{value:"Parameters",id:"parameters-9",level:4},{value:"Examples",id:"examples-19",level:4},{value:"<code>file</code>",id:"file",level:3},{value:"Parameters",id:"parameters-10",level:4},{value:"Examples",id:"examples-20",level:4},{value:"<code>file_rel</code>",id:"file_rel",level:3},{value:"Parameters",id:"parameters-11",level:4},{value:"Examples",id:"examples-21",level:4},{value:"<code>hostname</code>",id:"hostname",level:3},{value:"Examples",id:"examples-22",level:4},{value:"<code>now</code>",id:"now",level:3},{value:"Examples",id:"examples-23",level:4},{value:"<code>timestamp_unix</code>",id:"timestamp_unix",level:3},{value:"Examples",id:"examples-24",level:4},{value:"<code>timestamp_unix_micro</code>",id:"timestamp_unix_micro",level:3},{value:"Examples",id:"examples-25",level:4},{value:"<code>timestamp_unix_milli</code>",id:"timestamp_unix_milli",level:3},{value:"Examples",id:"examples-26",level:4},{value:"<code>timestamp_unix_nano</code>",id:"timestamp_unix_nano",level:3},{value:"Examples",id:"examples-27",level:4},{value:"Fake Data Generation",id:"fake-data-generation",level:2},{value:"<code>fake</code>",id:"fake",level:3},{value:"Parameters",id:"parameters-12",level:4},{value:"Examples",id:"examples-28",level:4},{value:"Deprecated",id:"deprecated",level:2},{value:"<code>count</code>",id:"count",level:3},{value:"Parameters",id:"parameters-13",level:4},{value:"Examples",id:"examples-29",level:4},{value:"<code>meta</code>",id:"meta",level:3},{value:"Parameters",id:"parameters-14",level:4},{value:"Examples",id:"examples-30",level:4},{value:"<code>root_meta</code>",id:"root_meta",level:3},{value:"Parameters",id:"parameters-15",level:4},{value:"Examples",id:"examples-31",level:4}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Functions can be placed anywhere and allow you to extract information from your environment, generate values, or access data from the underlying message being mapped:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.doc.id = uuid_v4()\nroot.doc.received_at = now()\nroot.doc.host = hostname()\n"})}),"\n",(0,r.jsx)(n.p,{children:"Functions support both named and nameless style arguments:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.values_one = range(start: 0, stop: this.max, step: 2)\nroot.values_two = range(0, this.max, 2)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"general",children:"General"}),"\n",(0,r.jsx)(n.h3,{id:"counter",children:(0,r.jsx)(n.code,{children:"counter"})}),"\n",(0,r.jsx)(n.admonition,{title:"EXPERIMENTAL",type:"caution",children:(0,r.jsx)(n.p,{children:"This function is experimental and therefore breaking changes could be made to it outside of major version releases."})}),"\n",(0,r.jsxs)(n.p,{children:["Returns a non-negative integer that increments each time it is resolved, yielding the minimum (",(0,r.jsx)(n.code,{children:"1"})," by default) as the first value. Each instantiation of ",(0,r.jsx)(n.code,{children:"counter"})," has its own independent count. Once the maximum integer (or ",(0,r.jsx)(n.code,{children:"max"})," argument) is reached the counter resets back to the minimum."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"min"})})," <query expression, default ",(0,r.jsx)(n.code,{children:"1"}),"> The minimum value of the counter, this is the first value that will be yielded. If this parameter is dynamic it will be resolved only once during the lifetime of the mapping.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"max"})})," <query expression, default ",(0,r.jsx)(n.code,{children:"9223372036854775807"}),"> The maximum value of the counter, once this value is yielded the counter will reset back to the min. If this parameter is dynamic it will be resolved only once during the lifetime of the mapping.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"set"})})," <(optional) query expression> An optional mapping that when specified will be executed each time the counter is resolved. When this mapping resolves to a non-negative integer value it will cause the counter to reset to this value and yield it. If this mapping is omitted or doesn't resolve to anything then the counter will increment and yield the value as normal. If this mapping resolves to ",(0,r.jsx)(n.code,{children:"null"})," then the counter is not incremented and the current value is yielded. If this mapping resolves to a deletion then the counter is reset to the ",(0,r.jsx)(n.code,{children:"min"})," value."]}),"\n",(0,r.jsx)(n.h4,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.id = counter()\n\n# In:  {}\n# Out: {"id":1}\n\n# In:  {}\n# Out: {"id":2}\n'})}),"\n",(0,r.jsx)(n.p,{children:"It's possible to increment a counter multiple times within a single mapping invocation using a map."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'\nmap foos {\n  root = counter()\n}\n\nroot.meow_id = null.apply("foos")\nroot.woof_id = null.apply("foos")\n\n\n# In:  {}\n# Out: {"meow_id":1,"woof_id":2}\n\n# In:  {}\n# Out: {"meow_id":3,"woof_id":4}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["By specifying an optional ",(0,r.jsx)(n.code,{children:"set"})," parameter it is possible to dynamically reset the counter based on input data."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.consecutive_doggos = counter(min: 1, set: if !this.sound.lowercase().contains("woof") { 0 })\n\n# In:  {"sound":"woof woof"}\n# Out: {"consecutive_doggos":1}\n\n# In:  {"sound":"woofer wooooo"}\n# Out: {"consecutive_doggos":2}\n\n# In:  {"sound":"meow"}\n# Out: {"consecutive_doggos":0}\n\n# In:  {"sound":"uuuuh uh uh woof uhhhhhh"}\n# Out: {"consecutive_doggos":1}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"set"})," parameter can also be utilised to peek at the counter without mutating it by returning ",(0,r.jsx)(n.code,{children:"null"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.things = counter(set: if this.id == null { null })\n\n# In:  {"id":"a"}\n# Out: {"things":1}\n\n# In:  {"id":"b"}\n# Out: {"things":2}\n\n# In:  {"what":"just checking"}\n# Out: {"things":2}\n\n# In:  {"id":"c"}\n# Out: {"things":3}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"deleted",children:(0,r.jsx)(n.code,{children:"deleted"})}),"\n",(0,r.jsxs)(n.p,{children:["A function that returns a result indicating that the mapping target should be deleted. Deleting, also known as dropping, messages will result in them being acknowledged as successfully processed to inputs in a Bento pipeline. For more information about error handling patterns read ",(0,r.jsx)(n.a,{href:"/docs/configuration/error_handling",children:"here"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-1",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root = this\nroot.bar = deleted()\n\n# In:  {"bar":"bar_value","baz":"baz_value","foo":"foo value"}\n# Out: {"baz":"baz_value","foo":"foo value"}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Since the result is a value it can be used to do things like remove elements of an array within ",(0,r.jsx)(n.code,{children:"map_each"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.new_nums = this.nums.map_each(num -> if num < 10 { deleted() } else { num - 10 })\n\n# In:  {"nums":[3,11,4,17]}\n# Out: {"new_nums":[1,7]}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ksuid",children:(0,r.jsx)(n.code,{children:"ksuid"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a new ksuid each time it is invoked and prints a string representation."}),"\n",(0,r.jsx)(n.h4,{id:"examples-2",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.id = ksuid()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"nanoid",children:(0,r.jsx)(n.code,{children:"nanoid"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a new nanoid each time it is invoked and prints a string representation."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"length"})})," <(optional) integer> An optional length.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"alphabet"})})," <(optional) string> An optional custom alphabet to use for generating IDs. When specified the field ",(0,r.jsx)(n.code,{children:"length"})," must also be present."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-3",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.id = nanoid()\n"})}),"\n",(0,r.jsx)(n.p,{children:"It is possible to specify an optional length parameter."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.id = nanoid(54)\n"})}),"\n",(0,r.jsx)(n.p,{children:"It is also possible to specify an optional custom alphabet after the length parameter."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.id = nanoid(54, "abcde")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"random_int",children:(0,r.jsx)(n.code,{children:"random_int"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a non-negative pseudo-random 64-bit integer. An optional integer argument can be provided in order to seed the random number generator."}),"\n",(0,r.jsxs)(n.p,{children:["Optional ",(0,r.jsx)(n.code,{children:"min"})," and ",(0,r.jsx)(n.code,{children:"max"})," arguments can be provided in order to only generate numbers within a range. Neither of these parameters can be set via a dynamic expression (i.e. from values taken from mapped data). Instead, for dynamic ranges extract a min and max manually using a modulo operator (",(0,r.jsx)(n.code,{children:"random_int() % a + b"}),")."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"seed"})})," <query expression, default ",(0,r.jsx)(n.code,{children:'{"Value":0}'}),"> A seed to use, if a query is provided it will only be resolved once during the lifetime of the mapping.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"min"})})," <integer, default ",(0,r.jsx)(n.code,{children:"0"}),"> The minimum value the random generated number will have. The default value is 0.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"max"})})," <integer, default ",(0,r.jsx)(n.code,{children:"9223372036854775806"}),"> The maximum value the random generated number will have. The default value is 9223372036854775806 (math.MaxInt64 - 1)."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-4",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.first = random_int()\nroot.second = random_int(1)\nroot.third = random_int(max:20)\nroot.fourth = random_int(min:10, max:20)\nroot.fifth = random_int(timestamp_unix_nano(), 5, 20)\nroot.sixth = random_int(seed:timestamp_unix_nano(), max:20)\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"It is possible to specify a dynamic seed argument, in which case the argument will only be resolved once during the lifetime of the mapping."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.first = random_int(timestamp_unix_nano())\n"})}),"\n",(0,r.jsx)(n.h3,{id:"range",children:(0,r.jsx)(n.code,{children:"range"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"range"})," function creates an array of integers following a range between a start, stop and optional step integer argument. If the step argument is omitted then it defaults to 1. A negative step can be provided as long as stop < start."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"start"})})," <integer> The start value.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"stop"})})," <integer> The stop value.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"step"})})," <integer, default ",(0,r.jsx)(n.code,{children:"1"}),"> The step value."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-5",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.a = range(0, 10)\nroot.b = range(start: 0, stop: this.max, step: 2) # Using named params\nroot.c = range(0, -this.max, -2)\n\n# In:  {"max":10}\n# Out: {"a":[0,1,2,3,4,5,6,7,8,9],"b":[0,2,4,6,8],"c":[0,-2,-4,-6,-8]}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"snowflake_id",children:(0,r.jsx)(n.code,{children:"snowflake_id"})}),"\n",(0,r.jsx)(n.p,{children:"Generate a new snowflake ID each time it is invoked and prints a string representation. I.e.: 1559229974454472704"}),"\n",(0,r.jsx)(n.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"node_id"})})," <integer, default ",(0,r.jsx)(n.code,{children:"1"}),"> It is possible to specify the node_id."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-6",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.id = snowflake_id()\n"})}),"\n",(0,r.jsx)(n.p,{children:"It is possible to specify the node_id."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.id = snowflake_id(2)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"throw",children:(0,r.jsx)(n.code,{children:"throw"})}),"\n",(0,r.jsx)(n.p,{children:"Throws an error similar to a regular mapping error. This is useful for abandoning a mapping entirely given certain conditions."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"why"})})," <string> A string explanation for why an error was thrown, this will be added to the resulting error message."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-7",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.doc.type = match {\n  this.exists("header.id") => "foo"\n  this.exists("body.data") => "bar"\n  _ => throw("unknown type")\n}\nroot.doc.contents = (this.body.content | this.thing.body)\n\n# In:  {"header":{"id":"first"},"thing":{"body":"hello world"}}\n# Out: {"doc":{"contents":"hello world","type":"foo"}}\n\n# In:  {"nothing":"matches"}\n# Out: Error("failed assignment (line 1): unknown type")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ulid",children:(0,r.jsx)(n.code,{children:"ulid"})}),"\n",(0,r.jsx)(n.admonition,{title:"EXPERIMENTAL",type:"caution",children:(0,r.jsx)(n.p,{children:"This function is experimental and therefore breaking changes could be made to it outside of major version releases."})}),"\n",(0,r.jsx)(n.p,{children:"Generate a random ULID."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-6",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"encoding"})})," <string, default ",(0,r.jsx)(n.code,{children:'"crockford"'}),"> The format to encode a ULID into. Valid options are: crockford, hex",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"random_source"})})," <string, default ",(0,r.jsx)(n.code,{children:'"secure_random"'}),'> The source of randomness to use for generating ULIDs. "secure_random" is recommended for most use cases. "fast_random" can be used if security is not a concern.']}),"\n",(0,r.jsx)(n.h4,{id:"examples-8",children:"Examples"}),"\n",(0,r.jsx)(n.p,{children:"Using the defaults of Crockford Base32 encoding and secure random source"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.id = ulid()\n"})}),"\n",(0,r.jsx)(n.p,{children:"ULIDs can be hex-encoded too."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.id = ulid("hex")\n'})}),"\n",(0,r.jsx)(n.p,{children:"They can be generated using a fast, but unsafe, random source for use cases that are not security-sensitive."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.id = ulid("crockford", "fast_random")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"uuid_v4",children:(0,r.jsx)(n.code,{children:"uuid_v4"})}),"\n",(0,r.jsx)(n.p,{children:"Generates a new RFC-4122 UUID each time it is invoked and prints a string representation."}),"\n",(0,r.jsx)(n.h4,{id:"examples-9",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.id = uuid_v4()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"message-info",children:"Message Info"}),"\n",(0,r.jsx)(n.h3,{id:"batch_index",children:(0,r.jsx)(n.code,{children:"batch_index"})}),"\n",(0,r.jsx)(n.p,{children:"Returns the index of the mapped message within a batch. This is useful for applying maps only on certain messages of a batch."}),"\n",(0,r.jsx)(n.h4,{id:"examples-10",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root = if batch_index() > 0 { deleted() }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"batch_size",children:(0,r.jsx)(n.code,{children:"batch_size"})}),"\n",(0,r.jsx)(n.p,{children:"Returns the size of the message batch."}),"\n",(0,r.jsx)(n.h4,{id:"examples-11",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.foo = batch_size()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"content",children:(0,r.jsx)(n.code,{children:"content"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns the full raw contents of the mapping target message as a byte array. When mapping to a JSON field the value should be encoded using the method ",(0,r.jsx)(n.a,{href:"/docs/guides/bloblang/methods#encode",children:(0,r.jsx)(n.code,{children:"encode"})}),", or cast to a string directly using the method ",(0,r.jsx)(n.a,{href:"/docs/guides/bloblang/methods#string",children:(0,r.jsx)(n.code,{children:"string"})}),", otherwise it will be base64 encoded by default."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-12",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.doc = content().string()\n\n# In:  {"foo":"bar"}\n# Out: {"doc":"{\\"foo\\":\\"bar\\"}"}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"error",children:(0,r.jsx)(n.code,{children:"error"})}),"\n",(0,r.jsxs)(n.p,{children:["If an error has occurred during the processing of a message this function returns the reported cause of the error as a string, otherwise ",(0,r.jsx)(n.code,{children:"null"}),". For more information about error handling patterns read ",(0,r.jsx)(n.a,{href:"/docs/configuration/error_handling",children:"here"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-13",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.doc.error = error()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"errored",children:(0,r.jsx)(n.code,{children:"errored"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns a boolean value indicating whether an error has occurred during the processing of a message. For more information about error handling patterns read ",(0,r.jsx)(n.a,{href:"/docs/configuration/error_handling",children:"here"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-14",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.doc.status = if errored() { 400 } else { 200 }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"json",children:(0,r.jsx)(n.code,{children:"json"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns the value of a field within a JSON message located by a ",(0,r.jsx)(n.a,{href:"/docs/configuration/field_paths",children:"dot path"})," argument. This function always targets the entire source JSON document regardless of the mapping context."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-7",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"path"})})," <string, default ",(0,r.jsx)(n.code,{children:'""'}),"> An optional ",(0,r.jsx)(n.a,{href:"/docs/configuration/field_paths",children:"dot path"})," identifying a field to obtain."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-15",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.mapped = json("foo.bar")\n\n# In:  {"foo":{"bar":"hello world"}}\n# Out: {"mapped":"hello world"}\n'})}),"\n",(0,r.jsx)(n.p,{children:"The path argument is optional and if omitted the entire JSON payload is returned."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.doc = json()\n\n# In:  {"foo":{"bar":"hello world"}}\n# Out: {"doc":{"foo":{"bar":"hello world"}}}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"metadata",children:(0,r.jsx)(n.code,{children:"metadata"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns the value of a metadata key from the input message, or ",(0,r.jsx)(n.code,{children:"null"})," if the key does not exist. Since values are extracted from the read-only input message they do NOT reflect changes made from within the map, in order to query metadata mutations made within a mapping use the ",(0,r.jsxs)(n.a,{href:"/docs/guides/bloblang/about#metadata",children:[(0,r.jsx)(n.code,{children:"@"})," operator"]}),". This function supports extracting metadata from other messages of a batch with the ",(0,r.jsx)(n.code,{children:"from"})," method."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-8",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"key"})})," <string, default ",(0,r.jsx)(n.code,{children:'""'}),"> An optional key of a metadata value to obtain."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-16",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.topic = metadata("kafka_topic")\n'})}),"\n",(0,r.jsx)(n.p,{children:"The key parameter is optional and if omitted the entire metadata contents are returned as an object."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.all_metadata = metadata()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"tracing_id",children:(0,r.jsx)(n.code,{children:"tracing_id"})}),"\n",(0,r.jsx)(n.admonition,{title:"EXPERIMENTAL",type:"caution",children:(0,r.jsx)(n.p,{children:"This function is experimental and therefore breaking changes could be made to it outside of major version releases."})}),"\n",(0,r.jsx)(n.p,{children:"Provides the message trace id. The returned value will be zeroed if the message does not contain a span."}),"\n",(0,r.jsx)(n.h4,{id:"examples-17",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"meta trace_id = tracing_id()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"tracing_span",children:(0,r.jsx)(n.code,{children:"tracing_span"})}),"\n",(0,r.jsx)(n.admonition,{title:"EXPERIMENTAL",type:"caution",children:(0,r.jsx)(n.p,{children:"This function is experimental and therefore breaking changes could be made to it outside of major version releases."})}),"\n",(0,r.jsxs)(n.p,{children:["Provides the message tracing span ",(0,r.jsx)(n.a,{href:"/docs/components/tracers/about",children:"(created via Open Telemetry APIs)"})," as an object serialised via text map formatting. The returned value will be ",(0,r.jsx)(n.code,{children:"null"})," if the message does not have a span."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-18",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.headers.traceparent = tracing_span().traceparent\n\n# In:  {"some_stuff":"just can\'t be explained by science"}\n# Out: {"headers":{"traceparent":"00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01"}}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"environment",children:"Environment"}),"\n",(0,r.jsx)(n.h3,{id:"env",children:(0,r.jsx)(n.code,{children:"env"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns the value of an environment variable, or ",(0,r.jsx)(n.code,{children:"null"})," if the environment variable does not exist."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-9",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"name"})})," <string> The name of an environment variable.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"no_cache"})})," <bool, default ",(0,r.jsx)(n.code,{children:"false"}),"> Force the variable lookup to occur for each mapping invocation."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-19",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.thing.key = env("key").or("default value")\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.thing.key = env(this.thing.key_name)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["When the name parameter is static this function will only resolve once and yield the same result for each invocation as an optimisation, this means that updates to env vars during runtime will not be reflected. You can disable this cache with the optional parameter ",(0,r.jsx)(n.code,{children:"no_cache"}),", which when set to ",(0,r.jsx)(n.code,{children:"true"})," will cause the variable lookup to be performed for each execution of the mapping."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.thing.key = env(name: "key", no_cache: true)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"file",children:(0,r.jsx)(n.code,{children:"file"})}),"\n",(0,r.jsxs)(n.p,{children:["Reads a file and returns its contents. Relative paths are resolved from the directory of the process executing the mapping. In order to read files relative to the mapping file use the newer ",(0,r.jsxs)(n.a,{href:"#file_rel",children:[(0,r.jsx)(n.code,{children:"file_rel"})," function"]})]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-10",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"path"})})," <string> The path of the target file.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"no_cache"})})," <bool, default ",(0,r.jsx)(n.code,{children:"false"}),"> Force the file to be read for each mapping invocation."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-20",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.doc = file(env("BENTO_TEST_BLOBLANG_FILE")).parse_json()\n\n# In:  {}\n# Out: {"doc":{"foo":"bar"}}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["When the path parameter is static this function will only read the specified file once and yield the same result for each invocation as an optimisation, this means that updates to files during runtime will not be reflected. You can disable this cache with the optional parameter ",(0,r.jsx)(n.code,{children:"no_cache"}),", which when set to ",(0,r.jsx)(n.code,{children:"true"})," will cause the file to be read for each execution of the mapping."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.doc = file(path: env("BENTO_TEST_BLOBLANG_FILE"), no_cache: true).parse_json()\n\n# In:  {}\n# Out: {"doc":{"foo":"bar"}}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"file_rel",children:(0,r.jsx)(n.code,{children:"file_rel"})}),"\n",(0,r.jsx)(n.p,{children:"Reads a file and returns its contents. Relative paths are resolved from the directory of the mapping."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-11",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"path"})})," <string> The path of the target file.",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"no_cache"})})," <bool, default ",(0,r.jsx)(n.code,{children:"false"}),"> Force the file to be read for each mapping invocation."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-21",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.doc = file_rel(env("BENTO_TEST_BLOBLANG_FILE")).parse_json()\n\n# In:  {}\n# Out: {"doc":{"foo":"bar"}}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["When the path parameter is static this function will only read the specified file once and yield the same result for each invocation as an optimisation, this means that updates to files during runtime will not be reflected. You can disable this cache with the optional parameter ",(0,r.jsx)(n.code,{children:"no_cache"}),", which when set to ",(0,r.jsx)(n.code,{children:"true"})," will cause the file to be read for each execution of the mapping."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.doc = file_rel(path: env("BENTO_TEST_BLOBLANG_FILE"), no_cache: true).parse_json()\n\n# In:  {}\n# Out: {"doc":{"foo":"bar"}}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"hostname",children:(0,r.jsx)(n.code,{children:"hostname"})}),"\n",(0,r.jsx)(n.p,{children:"Returns a string matching the hostname of the machine running Bento."}),"\n",(0,r.jsx)(n.h4,{id:"examples-22",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.thing.host = hostname()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"now",children:(0,r.jsx)(n.code,{children:"now"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns the current timestamp as a string in RFC 3339 format with the local timezone. Use the method ",(0,r.jsx)(n.code,{children:"ts_format"})," in order to change the format and timezone."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-23",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.received_at = now()\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.received_at = now().ts_format("Mon Jan 2 15:04:05 -0700 MST 2006", "UTC")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"timestamp_unix",children:(0,r.jsx)(n.code,{children:"timestamp_unix"})}),"\n",(0,r.jsx)(n.p,{children:"Returns the current unix timestamp in seconds."}),"\n",(0,r.jsx)(n.h4,{id:"examples-24",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.received_at = timestamp_unix()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"timestamp_unix_micro",children:(0,r.jsx)(n.code,{children:"timestamp_unix_micro"})}),"\n",(0,r.jsx)(n.p,{children:"Returns the current unix timestamp in microseconds."}),"\n",(0,r.jsx)(n.h4,{id:"examples-25",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.received_at = timestamp_unix_micro()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"timestamp_unix_milli",children:(0,r.jsx)(n.code,{children:"timestamp_unix_milli"})}),"\n",(0,r.jsx)(n.p,{children:"Returns the current unix timestamp in milliseconds."}),"\n",(0,r.jsx)(n.h4,{id:"examples-26",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.received_at = timestamp_unix_milli()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"timestamp_unix_nano",children:(0,r.jsx)(n.code,{children:"timestamp_unix_nano"})}),"\n",(0,r.jsx)(n.p,{children:"Returns the current unix timestamp in nanoseconds."}),"\n",(0,r.jsx)(n.h4,{id:"examples-27",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.received_at = timestamp_unix_nano()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"fake-data-generation",children:"Fake Data Generation"}),"\n",(0,r.jsx)(n.h3,{id:"fake",children:(0,r.jsx)(n.code,{children:"fake"})}),"\n",(0,r.jsx)(n.admonition,{title:"BETA",type:"caution",children:(0,r.jsx)(n.p,{children:"This function is mostly stable but breaking changes could still be made outside of major version releases if a fundamental problem with it is found."})}),"\n",(0,r.jsxs)(n.p,{children:["Takes in a string that maps to a ",(0,r.jsx)(n.a,{href:"https://github.com/go-faker/faker",children:"faker"})," function and returns the result from that faker function. Returns an error if the given string doesn't match a supported faker function. Supported functions: ",(0,r.jsx)(n.code,{children:"latitude"}),", ",(0,r.jsx)(n.code,{children:"longitude"}),", ",(0,r.jsx)(n.code,{children:"unix_time"}),", ",(0,r.jsx)(n.code,{children:"date"}),", ",(0,r.jsx)(n.code,{children:"time_string"}),", ",(0,r.jsx)(n.code,{children:"month_name"}),", ",(0,r.jsx)(n.code,{children:"year_string"}),", ",(0,r.jsx)(n.code,{children:"day_of_week"}),", ",(0,r.jsx)(n.code,{children:"day_of_month"}),", ",(0,r.jsx)(n.code,{children:"timestamp"}),", ",(0,r.jsx)(n.code,{children:"century"}),", ",(0,r.jsx)(n.code,{children:"timezone"}),", ",(0,r.jsx)(n.code,{children:"time_period"}),", ",(0,r.jsx)(n.code,{children:"email"}),", ",(0,r.jsx)(n.code,{children:"mac_address"}),", ",(0,r.jsx)(n.code,{children:"domain_name"}),", ",(0,r.jsx)(n.code,{children:"url"}),", ",(0,r.jsx)(n.code,{children:"username"}),", ",(0,r.jsx)(n.code,{children:"ipv4"}),", ",(0,r.jsx)(n.code,{children:"ipv6"}),", ",(0,r.jsx)(n.code,{children:"password"}),", ",(0,r.jsx)(n.code,{children:"jwt"}),", ",(0,r.jsx)(n.code,{children:"word"}),", ",(0,r.jsx)(n.code,{children:"sentence"}),", ",(0,r.jsx)(n.code,{children:"paragraph"}),", ",(0,r.jsx)(n.code,{children:"cc_type"}),", ",(0,r.jsx)(n.code,{children:"cc_number"}),", ",(0,r.jsx)(n.code,{children:"currency"}),", ",(0,r.jsx)(n.code,{children:"amount_with_currency"}),", ",(0,r.jsx)(n.code,{children:"title_male"}),", ",(0,r.jsx)(n.code,{children:"title_female"}),", ",(0,r.jsx)(n.code,{children:"first_name"}),", ",(0,r.jsx)(n.code,{children:"first_name_male"}),", ",(0,r.jsx)(n.code,{children:"first_name_female"}),", ",(0,r.jsx)(n.code,{children:"last_name"}),", ",(0,r.jsx)(n.code,{children:"name"}),", ",(0,r.jsx)(n.code,{children:"gender"}),", ",(0,r.jsx)(n.code,{children:"chinese_first_name"}),", ",(0,r.jsx)(n.code,{children:"chinese_last_name"}),", ",(0,r.jsx)(n.code,{children:"chinese_name"}),", ",(0,r.jsx)(n.code,{children:"phone_number"}),", ",(0,r.jsx)(n.code,{children:"toll_free_phone_number"}),", ",(0,r.jsx)(n.code,{children:"e164_phone_number"}),", ",(0,r.jsx)(n.code,{children:"uuid_hyphenated"}),", ",(0,r.jsx)(n.code,{children:"uuid_digit"}),". Refer to the ",(0,r.jsx)(n.a,{href:"https://github.com/go-faker/faker",children:"faker"})," docs for details on these functions."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-12",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"function"})})," <string, default ",(0,r.jsx)(n.code,{children:'""'}),"> The name of the function to use to generate the value."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-28",children:"Examples"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"time_string"})," to generate a time in the format ",(0,r.jsx)(n.code,{children:"00:00:00"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.time = fake("time_string")\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"email"})," to generate a string in email address format:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.email = fake("email")\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"jwt"})," to generate a JWT token:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.jwt = fake("jwt")\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"uuid_hyphenated"})," to generate a hypenated UUID:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.uuid = fake("uuid_hyphenated")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"deprecated",children:"Deprecated"}),"\n",(0,r.jsx)(n.h3,{id:"count",children:(0,r.jsx)(n.code,{children:"count"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"count"})," function is a counter starting at 1 which increments after each time it is called. Count takes an argument which is an identifier for the counter, allowing you to specify multiple unique counters in your configuration."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-13",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"name"})})," <string> An identifier for the counter."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-29",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root = this\nroot.id = count("bloblang_function_example")\n\n# In:  {"message":"foo"}\n# Out: {"id":1,"message":"foo"}\n\n# In:  {"message":"bar"}\n# Out: {"id":2,"message":"bar"}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"meta",children:(0,r.jsx)(n.code,{children:"meta"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns the value of a metadata key from the input message as a string, or ",(0,r.jsx)(n.code,{children:"null"})," if the key does not exist. Since values are extracted from the read-only input message they do NOT reflect changes made from within the map. In order to query metadata mutations made within a mapping use the ",(0,r.jsxs)(n.a,{href:"#root_meta",children:[(0,r.jsx)(n.code,{children:"root_meta"})," function"]}),". This function supports extracting metadata from other messages of a batch with the ",(0,r.jsx)(n.code,{children:"from"})," method."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-14",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"key"})})," <string, default ",(0,r.jsx)(n.code,{children:'""'}),"> An optional key of a metadata value to obtain."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-30",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.topic = meta("kafka_topic")\n'})}),"\n",(0,r.jsx)(n.p,{children:"The key parameter is optional and if omitted the entire metadata contents are returned as an object."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.all_metadata = meta()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"root_meta",children:(0,r.jsx)(n.code,{children:"root_meta"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns the value of a metadata key from the new message being created as a string, or ",(0,r.jsx)(n.code,{children:"null"})," if the key does not exist. Changes made to metadata during a mapping will be reflected by this function."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters-15",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"key"})})," <string, default ",(0,r.jsx)(n.code,{children:'""'}),"> An optional key of a metadata value to obtain."]}),"\n",(0,r.jsx)(n.h4,{id:"examples-31",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:'root.topic = root_meta("kafka_topic")\n'})}),"\n",(0,r.jsx)(n.p,{children:"The key parameter is optional and if omitted the entire metadata contents are returned as an object."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-coffee",children:"root.all_metadata = root_meta()\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},85162:function(e,n,a){a.d(n,{Z:function(){return t}});a(67294);var r=a(86010),i={tabItem:"tabItem_Ymn6"},s=a(85893);function t(e){let{children:n,hidden:a,className:t}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.Z)(i.tabItem,t),hidden:a,children:n})}},74866:function(e,n,a){a.d(n,{Z:function(){return w}});var r=a(67294),i=a(86010),s=a(12466),t=a(16550),o=a(20469),l=a(91980),d=a(67392),c=a(50012);function h(e){var n,a;return null!=(n=null==(a=r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:a.filter(Boolean))?n:[]}function u(e){const{values:n,children:a}=e;return(0,r.useMemo)((()=>{const e=null!=n?n:function(e){return h(e).map((e=>{let{props:{value:n,label:a,attributes:r,default:i}}=e;return{value:n,label:a,attributes:r,default:i}}))}(a);return function(e){const n=(0,d.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,a])}function m(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:a}=e;const i=(0,t.k6)(),s=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,l._X)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(i.location.search);n.set(s,e),i.replace({...i.location,search:n.toString()})}),[s,i])]}function p(e){const{defaultValue:n,queryString:a=!1,groupId:i}=e,s=u(e),[t,l]=(0,r.useState)((()=>function(e){var n;let{defaultValue:a,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!m({value:a,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+a+'" but none of its children has the corresponding value. Available values are: '+r.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return a}const i=null!=(n=r.find((e=>e.default)))?n:r[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:s}))),[d,h]=x({queryString:a,groupId:i}),[p,f]=function(e){let{groupId:n}=e;const a=function(e){return e?"docusaurus.tab."+e:null}(n),[i,s]=(0,c.Nk)(a);return[i,(0,r.useCallback)((e=>{a&&s.set(e)}),[a,s])]}({groupId:i}),j=(()=>{const e=null!=d?d:p;return m({value:e,tabValues:s})?e:null})();(0,o.Z)((()=>{j&&l(j)}),[j]);return{selectedValue:t,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error("Can't select invalid tab value="+e);l(e),h(e),f(e)}),[h,f,s]),tabValues:s}}var f=a(72389),j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"},g=a(85893);function v(e){let{className:n,block:a,selectedValue:r,selectValue:t,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.o5)(),c=e=>{const n=e.currentTarget,a=l.indexOf(n),i=o[a].value;i!==r&&(d(n),t(i))},h=e=>{var n;let a=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{var r;const n=l.indexOf(e.currentTarget)+1;a=null!=(r=l[n])?r:l[0];break}case"ArrowLeft":{var i;const n=l.indexOf(e.currentTarget)-1;a=null!=(i=l[n])?i:l[l.length-1];break}}null==(n=a)||n.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":a},n),children:o.map((e=>{let{value:n,label:a,attributes:s}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>l.push(e),onKeyDown:h,onClick:c,...s,className:(0,i.Z)("tabs__item",j.tabItem,null==s?void 0:s.className,{"tabs__item--active":r===n}),children:null!=a?a:n},n)}))})}function b(e){let{lazy:n,children:a,selectedValue:i}=e;const s=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===i));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function _(e){const n=p(e);return(0,g.jsxs)("div",{className:(0,i.Z)("tabs-container",j.tabList),children:[(0,g.jsx)(v,{...e,...n}),(0,g.jsx)(b,{...e,...n})]})}function w(e){const n=(0,f.Z)();return(0,g.jsx)(_,{...e,children:h(e.children)},String(n))}},11151:function(e,n,a){a.d(n,{Z:function(){return o},a:function(){return t}});var r=a(67294);const i={},s=r.createContext(i);function t(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);