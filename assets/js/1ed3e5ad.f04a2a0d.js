/*! For license information please see 1ed3e5ad.f04a2a0d.js.LICENSE.txt */
(self.webpackChunkbento=self.webpackChunkbento||[]).push([[7323],{174:function(e,n,t){"use strict";t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return u},metadata:function(){return l},toc:function(){return p}});var r=t(85893),s=t(11151),a=t(74866),o=t(85162),i=t(36971);const u={title:"Scanners",sidebar_label:"About"},c=void 0,l={id:"components/scanners/about",title:"Scanners",description:'For most Bento inputs the data consumed comes pre-partitioned into discrete messages which can be comfortably held and processed in memory. However, some inputs such as the file input often need to consume data that is large enough that it cannot be processed entirely within memory, and others such as the socket input don\'t have a concept of consuming the data "entirely".',source:"@site/docs/components/scanners/about.md",sourceDirName:"components/scanners",slug:"/components/scanners/about",permalink:"/docs/components/scanners/about",draft:!1,unlisted:!1,editUrl:"https://github.com/warpstreamlabs/bento/edit/main/website/docs/components/scanners/about.md",tags:[],version:"current",frontMatter:{title:"Scanners",sidebar_label:"About"},sidebar:"docs",previous:{title:"zmq4",permalink:"/docs/components/inputs/zmq4"},next:{title:"avro",permalink:"/docs/components/scanners/avro"}},d={},p=[];function h(e){const n={a:"a",code:"code",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["For most Bento ",(0,r.jsx)(n.a,{href:"/docs/components/inputs/about",children:"inputs"})," the data consumed comes pre-partitioned into discrete messages which can be comfortably held and processed in memory. However, some inputs such as the ",(0,r.jsxs)(n.a,{href:"/docs/components/inputs/file",children:[(0,r.jsx)(n.code,{children:"file"})," input"]})," often need to consume data that is large enough that it cannot be processed entirely within memory, and others such as the ",(0,r.jsxs)(n.a,{href:"/docs/components/inputs/socket",children:[(0,r.jsx)(n.code,{children:"socket"})," input"]}),' don\'t have a concept of consuming the data "entirely".']}),"\n",(0,r.jsx)(n.p,{children:"For such inputs it's necessary to define a mechanism by which the stream of source bytes can be chopped into smaller logical messages, processed and outputted as a continuous process whilst the stream is being read, as this dramatically reduces the memory usage of Bento as a whole and results in a more fluid flow of data."}),"\n",(0,r.jsxs)(n.p,{children:["The way in which we define this chopping mechanism is through scanners, configured as a field on each input that requires one. For example, if we wished to consume files line-by-line, which each individual line being processed as a discrete message, we could use the ",(0,r.jsxs)(n.a,{href:"/docs/components/scanners/lines",children:[(0,r.jsx)(n.code,{children:"lines"})," scanner"]})," with our ",(0,r.jsxs)(n.a,{href:"/docs/components/inputs/file",children:[(0,r.jsx)(n.code,{children:"file"})," input"]}),":"]}),"\n","\n",(0,r.jsxs)(a.Z,{defaultValue:"common",values:[{label:"Common",value:"common"},{label:"Advanced",value:"advanced"}],children:[(0,r.jsx)(o.Z,{value:"common",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'input:\n  file:\n    paths: [ "./*.txt" ]\n    scanner:\n      lines: {}\n'})})}),(0,r.jsx)(o.Z,{value:"advanced",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# Instead of newlines, use a custom delimiter:\ninput:\n  file:\n    paths: [ "./*.txt" ]\n    scanner:\n      lines:\n        custom_delimiter: "---END---"\n        max_buffer_size: 100_000_000 # 100MB line buffer\n'})})})]}),"\n",(0,r.jsx)(n.p,{children:"A scanner is a plugin similar to any other core Bento component (inputs, processors, outputs, etc), which means it's possible to define your own scanners that can be utilised by inputs that need them."}),"\n","\n","\n",(0,r.jsx)(i.Z,{type:"scanners",singular:"scanner"})]})}function m(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},85162:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});t(67294);var r=t(86010),s={tabItem:"tabItem_Ymn6"},a=t(85893);function o(e){let{children:n,hidden:t,className:o}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.Z)(s.tabItem,o),hidden:t,children:n})}},74866:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var r=t(67294),s=t(86010),a=t(12466),o=t(16550),i=t(20469),u=t(91980),c=t(67392),l=t(50012);function d(e){var n,t;return null!=(n=null==(t=r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}function p(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=null!=n?n:function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:s}}=e;return{value:n,label:t,attributes:r,default:s}}))}(t);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const s=(0,o.k6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:n,groupId:t});return[(0,u._X)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(s.location.search);n.set(a,e),s.replace({...s.location,search:n.toString()})}),[a,s])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,a=p(e),[o,u]=(0,r.useState)((()=>function(e){var n;let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+r.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}const s=null!=(n=r.find((e=>e.default)))?n:r[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:a}))),[c,d]=m({queryString:t,groupId:s}),[f,b]=function(e){let{groupId:n}=e;const t=function(e){return e?"docusaurus.tab."+e:null}(n),[s,a]=(0,l.Nk)(t);return[s,(0,r.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:s}),v=(()=>{const e=null!=c?c:f;return h({value:e,tabValues:a})?e:null})();(0,i.Z)((()=>{v&&u(v)}),[v]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error("Can't select invalid tab value="+e);u(e),d(e),b(e)}),[d,b,a]),tabValues:a}}var b=t(72389),v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"},g=t(85893);function y(e){let{className:n,block:t,selectedValue:r,selectValue:o,tabValues:i}=e;const u=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.o5)(),l=e=>{const n=e.currentTarget,t=u.indexOf(n),s=i[t].value;s!==r&&(c(n),o(s))},d=e=>{var n;let t=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{var r;const n=u.indexOf(e.currentTarget)+1;t=null!=(r=u[n])?r:u[0];break}case"ArrowLeft":{var s;const n=u.indexOf(e.currentTarget)-1;t=null!=(s=u[n])?s:u[u.length-1];break}}null==(n=t)||n.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>u.push(e),onKeyDown:d,onClick:l,...a,className:(0,s.Z)("tabs__item",v.tabItem,null==a?void 0:a.className,{"tabs__item--active":r===n}),children:null!=t?t:n},n)}))})}function x(e){let{lazy:n,children:t,selectedValue:s}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function w(e){const n=f(e);return(0,g.jsxs)("div",{className:(0,s.Z)("tabs-container",v.tabList),children:[(0,g.jsx)(y,{...e,...n}),(0,g.jsx)(x,{...e,...n})]})}function j(e){const n=(0,b.Z)();return(0,g.jsx)(w,{...e,children:d(e.children)},String(n))}},36971:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});t(67294);var r=t(52263),s=t(94184),a=t.n(s),o="componentList_axqy",i=t(85893);var u=function(e){let{type:n,singular:t}=e;const s=(0,r.Z)().siteConfig.customFields.components[n];return"string"!=typeof t&&(t=n,/s$/.test(t)&&(t=n.slice(0,-1))),(0,i.jsxs)("div",{className:"dropdown dropdown--hoverable",children:[(0,i.jsxs)("button",{className:"button button--outline button--primary",children:["Jump to ",t]}),(0,i.jsx)("ul",{className:a()(o,"dropdown__menu"),children:s.map((e=>(0,i.jsx)("li",{children:(0,i.jsx)("a",{className:"dropdown__link",href:"/docs/components/"+n+"/"+e.name,children:e.name})},e.name)))})]})}},94184:function(e,n){var t;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e=[],n=0;n<arguments.length;n++){var t=arguments[n];if(t){var a=typeof t;if("string"===a||"number"===a)e.push(t);else if(Array.isArray(t)){if(t.length){var o=s.apply(null,t);o&&e.push(o)}}else if("object"===a){if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]")){e.push(t.toString());continue}for(var i in t)r.call(t,i)&&t[i]&&e.push(i)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(t=function(){return s}.apply(n,[]))||(e.exports=t)}()},11151:function(e,n,t){"use strict";t.d(n,{Z:function(){return i},a:function(){return o}});var r=t(67294);const s={},a=r.createContext(s);function o(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);