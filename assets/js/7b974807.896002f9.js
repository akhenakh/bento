"use strict";(self.webpackChunkbento=self.webpackChunkbento||[]).push([[943],{43979:function(e,t,r){r.r(t),r.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return u},metadata:function(){return i},toc:function(){return d}});var n=r(85893),s=r(11151),a=r(74866),o=r(85162);const u={title:"reject_errored",slug:"reject_errored",type:"output",status:"stable",categories:["Utility"],name:"reject_errored"},l=void 0,i={id:"components/outputs/reject_errored",title:"reject_errored",description:"\x3c!--",source:"@site/docs/components/outputs/reject_errored.md",sourceDirName:"components/outputs",slug:"/components/outputs/reject_errored",permalink:"/docs/components/outputs/reject_errored",draft:!1,unlisted:!1,editUrl:"https://github.com/warpstreamlabs/bento/edit/main/website/docs/components/outputs/reject_errored.md",tags:[],version:"current",frontMatter:{title:"reject_errored",slug:"reject_errored",type:"output",status:"stable",categories:["Utility"],name:"reject_errored"},sidebar:"docs",previous:{title:"reject",permalink:"/docs/components/outputs/reject"},next:{title:"resource",permalink:"/docs/components/outputs/resource"}},c={},d=[{value:"Examples",id:"examples",level:2}];function p(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"Rejects messages that have failed their processing steps, resulting in nack behaviour at the input level, otherwise sends them to a child output."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yml",children:'# Config fields, showing default values\noutput:\n  label: ""\n  reject_errored: null # No default (required)\n'})}),"\n",(0,n.jsx)(t.p,{children:"The routing of messages rejected by this output depends on the type of input it came from. For inputs that support propagating nacks upstream such as AMQP or NATS the message will be nacked. However, for inputs that are sequential such as files or Kafka the messages will simply be reprocessed from scratch."}),"\n",(0,n.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,n.jsxs)(a.Z,{defaultValue:"Rejecting Failed Messages",values:[{label:"Rejecting Failed Messages",value:"Rejecting Failed Messages"},{label:"DLQing Failed Messages",value:"DLQing Failed Messages"}],children:[(0,n.jsxs)(o.Z,{value:"Rejecting Failed Messages",children:[(0,n.jsx)(t.p,{children:"The most straight forward use case for this output type is to nack messages that have failed their processing steps. In this example our mapping might fail, in which case the messages that failed are rejected and will be nacked by our input:"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",children:"input:\n  nats_jetstream:\n    urls: [ nats://127.0.0.1:4222 ]\n    subject: foos.pending\n\npipeline:\n  processors:\n    - mutation: 'root.age = this.fuzzy.age.int64()'\n\noutput:\n  reject_errored:\n    nats_jetstream:\n      urls: [ nats://127.0.0.1:4222 ]\n      subject: foos.processed\n"})})]}),(0,n.jsxs)(o.Z,{value:"DLQing Failed Messages",children:[(0,n.jsxs)(t.p,{children:["Another use case for this output is to send failed messages straight into a dead-letter queue. We use it within a ",(0,n.jsx)(t.a,{href:"/docs/components/outputs/fallback",children:"fallback output"})," that allows us to specify where these failed messages should go to next."]}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",children:"pipeline:\n  processors:\n    - mutation: 'root.age = this.fuzzy.age.int64()'\n\noutput:\n  fallback:\n    - reject_errored:\n        http_client:\n          url: http://foo:4195/post/might/become/unreachable\n          retries: 3\n          retry_period: 1s\n    - http_client:\n        url: http://bar:4196/somewhere/else\n        retries: 3\n        retry_period: 1s\n"})})]})]})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},85162:function(e,t,r){r.d(t,{Z:function(){return o}});r(67294);var n=r(86010),s={tabItem:"tabItem_Ymn6"},a=r(85893);function o(e){let{children:t,hidden:r,className:o}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,n.Z)(s.tabItem,o),hidden:r,children:t})}},74866:function(e,t,r){r.d(t,{Z:function(){return w}});var n=r(67294),s=r(86010),a=r(12466),o=r(16550),u=r(20469),l=r(91980),i=r(67392),c=r(50012);function d(e){var t,r;return null!=(t=null==(r=n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:r.filter(Boolean))?t:[]}function p(e){const{values:t,children:r}=e;return(0,n.useMemo)((()=>{const e=null!=t?t:function(e){return d(e).map((e=>{let{props:{value:t,label:r,attributes:n,default:s}}=e;return{value:t,label:r,attributes:n,default:s}}))}(r);return function(e){const t=(0,i.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,r])}function h(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:r}=e;const s=(0,o.k6)(),a=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:t,groupId:r});return[(0,l._X)(a),(0,n.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(s.location.search);t.set(a,e),s.replace({...s.location,search:t.toString()})}),[a,s])]}function m(e){const{defaultValue:t,queryString:r=!1,groupId:s}=e,a=p(e),[o,l]=(0,n.useState)((()=>function(e){var t;let{defaultValue:r,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!h({value:r,tabValues:n}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+r+'" but none of its children has the corresponding value. Available values are: '+n.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return r}const s=null!=(t=n.find((e=>e.default)))?t:n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:t,tabValues:a}))),[i,d]=f({queryString:r,groupId:s}),[m,b]=function(e){let{groupId:t}=e;const r=function(e){return e?"docusaurus.tab."+e:null}(t),[s,a]=(0,c.Nk)(r);return[s,(0,n.useCallback)((e=>{r&&a.set(e)}),[r,a])]}({groupId:s}),g=(()=>{const e=null!=i?i:m;return h({value:e,tabValues:a})?e:null})();(0,u.Z)((()=>{g&&l(g)}),[g]);return{selectedValue:o,selectValue:(0,n.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error("Can't select invalid tab value="+e);l(e),d(e),b(e)}),[d,b,a]),tabValues:a}}var b=r(72389),g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"},v=r(85893);function j(e){let{className:t,block:r,selectedValue:n,selectValue:o,tabValues:u}=e;const l=[],{blockElementScrollPositionUntilNextRender:i}=(0,a.o5)(),c=e=>{const t=e.currentTarget,r=l.indexOf(t),s=u[r].value;s!==n&&(i(t),o(s))},d=e=>{var t;let r=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{var n;const t=l.indexOf(e.currentTarget)+1;r=null!=(n=l[t])?n:l[0];break}case"ArrowLeft":{var s;const t=l.indexOf(e.currentTarget)-1;r=null!=(s=l[t])?s:l[l.length-1];break}}null==(t=r)||t.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":r},t),children:u.map((e=>{let{value:t,label:r,attributes:a}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:n===t?0:-1,"aria-selected":n===t,ref:e=>l.push(e),onKeyDown:d,onClick:c,...a,className:(0,s.Z)("tabs__item",g.tabItem,null==a?void 0:a.className,{"tabs__item--active":n===t}),children:null!=r?r:t},t)}))})}function x(e){let{lazy:t,children:r,selectedValue:s}=e;const a=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===s));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:a.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function y(e){const t=m(e);return(0,v.jsxs)("div",{className:(0,s.Z)("tabs-container",g.tabList),children:[(0,v.jsx)(j,{...e,...t}),(0,v.jsx)(x,{...e,...t})]})}function w(e){const t=(0,b.Z)();return(0,v.jsx)(y,{...e,children:d(e.children)},String(t))}},11151:function(e,t,r){r.d(t,{Z:function(){return u},a:function(){return o}});var n=r(67294);const s={},a=n.createContext(s);function o(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function u(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);