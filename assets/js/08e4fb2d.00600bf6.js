"use strict";(self.webpackChunkbento=self.webpackChunkbento||[]).push([[8319],{391:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return c},default:function(){return p},frontMatter:function(){return l},metadata:function(){return o},toc:function(){return u}});var r=n(5893),i=n(1151),s=n(4866),a=n(5162);const l={title:"twitter_search",slug:"twitter_search",type:"input",status:"experimental",categories:["Services","Social"],name:"twitter_search"},c=void 0,o={id:"components/inputs/twitter_search",title:"twitter_search",description:"\x3c!--",source:"@site/docs/components/inputs/twitter_search.md",sourceDirName:"components/inputs",slug:"/components/inputs/twitter_search",permalink:"/bento/docs/components/inputs/twitter_search",draft:!1,unlisted:!1,editUrl:"https://github.com/warpstreamlabs/bento/edit/main/website/docs/components/inputs/twitter_search.md",tags:[],version:"current",frontMatter:{title:"twitter_search",slug:"twitter_search",type:"input",status:"experimental",categories:["Services","Social"],name:"twitter_search"},sidebar:"docs",previous:{title:"subprocess",permalink:"/bento/docs/components/inputs/subprocess"},next:{title:"websocket",permalink:"/bento/docs/components/inputs/websocket"}},d={},u=[{value:"Fields",id:"fields",level:2},{value:"<code>query</code>",id:"query",level:3},{value:"<code>tweet_fields</code>",id:"tweet_fields",level:3},{value:"<code>poll_period</code>",id:"poll_period",level:3},{value:"<code>backfill_period</code>",id:"backfill_period",level:3},{value:"<code>cache</code>",id:"cache",level:3},{value:"<code>cache_key</code>",id:"cache_key",level:3},{value:"<code>rate_limit</code>",id:"rate_limit",level:3},{value:"<code>api_key</code>",id:"api_key",level:3},{value:"<code>api_secret</code>",id:"api_secret",level:3}];function h(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.admonition,{title:"EXPERIMENTAL",type:"caution",children:(0,r.jsx)(t.p,{children:"This component is experimental and therefore subject to change or removal outside of major version releases."})}),"\n",(0,r.jsx)(t.p,{children:"Consumes tweets matching a given search using the Twitter recent search V2 API."}),"\n",(0,r.jsxs)(s.Z,{defaultValue:"common",values:[{label:"Common",value:"common"},{label:"Advanced",value:"advanced"}],children:[(0,r.jsx)(a.Z,{value:"common",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yml",children:'# Common config fields, showing default values\ninput:\n  label: ""\n  twitter_search:\n    query: "" # No default (required)\n    tweet_fields: []\n    poll_period: 1m\n    backfill_period: 5m\n    cache: "" # No default (required)\n    api_key: "" # No default (required)\n    api_secret: "" # No default (required)\n'})})}),(0,r.jsx)(a.Z,{value:"advanced",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yml",children:'# All config fields, showing default values\ninput:\n  label: ""\n  twitter_search:\n    query: "" # No default (required)\n    tweet_fields: []\n    poll_period: 1m\n    backfill_period: 5m\n    cache: "" # No default (required)\n    cache_key: last_tweet_id\n    rate_limit: ""\n    api_key: "" # No default (required)\n    api_secret: "" # No default (required)\n'})})})]}),"\n",(0,r.jsxs)(t.p,{children:["Continuously polls the ",(0,r.jsx)(t.a,{href:"https://developer.twitter.com/en/docs/twitter-api/tweets/search/api-reference/get-tweets-search-recent",children:"Twitter recent search V2 API"})," for tweets that match a given search query."]}),"\n",(0,r.jsxs)(t.p,{children:["Each tweet received is emitted as a JSON object message, with a field ",(0,r.jsx)(t.code,{children:"id"})," and ",(0,r.jsx)(t.code,{children:"text"})," by default. Extra fields ",(0,r.jsx)(t.a,{href:"https://developer.twitter.com/en/docs/twitter-api/fields",children:"can be obtained from the search API"})," when listed with the ",(0,r.jsx)(t.code,{children:"tweet_fields"})," field."]}),"\n",(0,r.jsxs)(t.p,{children:["In order to paginate requests that are made the ID of the latest received tweet is stored in a ",(0,r.jsx)(t.a,{href:"/docs/components/caches/about",children:"cache resource"}),", which is then used by subsequent requests to ensure only tweets after it are consumed. It is recommended that the cache you use is persistent so that Bento can resume searches at the correct place on a restart."]}),"\n",(0,r.jsxs)(t.p,{children:["Authentication is done using OAuth 2.0 credentials which can be generated within the ",(0,r.jsx)(t.a,{href:"https://developer.twitter.com",children:"Twitter developer portal"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"fields",children:"Fields"}),"\n",(0,r.jsx)(t.h3,{id:"query",children:(0,r.jsx)(t.code,{children:"query"})}),"\n",(0,r.jsx)(t.p,{children:"A search expression to use."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"})]}),"\n",(0,r.jsx)(t.h3,{id:"tweet_fields",children:(0,r.jsx)(t.code,{children:"tweet_fields"})}),"\n",(0,r.jsxs)(t.p,{children:["An optional list of additional fields to obtain for each tweet, by default only the fields ",(0,r.jsx)(t.code,{children:"id"})," and ",(0,r.jsx)(t.code,{children:"text"})," are returned. For more info refer to the ",(0,r.jsx)(t.a,{href:"https://developer.twitter.com/en/docs/twitter-api/fields",children:"twitter API docs."})]}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"array"}),(0,r.jsx)(t.br,{}),"\n","Default: ",(0,r.jsx)(t.code,{children:"[]"})]}),"\n",(0,r.jsx)(t.h3,{id:"poll_period",children:(0,r.jsx)(t.code,{children:"poll_period"})}),"\n",(0,r.jsx)(t.p,{children:"The length of time (as a duration string) to wait between each search request. This field can be set empty, in which case requests are made at the limit set by the rate limit. This field also supports cron expressions."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"}),(0,r.jsx)(t.br,{}),"\n","Default: ",(0,r.jsx)(t.code,{children:'"1m"'})]}),"\n",(0,r.jsx)(t.h3,{id:"backfill_period",children:(0,r.jsx)(t.code,{children:"backfill_period"})}),"\n",(0,r.jsx)(t.p,{children:"A duration string indicating the maximum age of tweets to acquire when starting a search."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"}),(0,r.jsx)(t.br,{}),"\n","Default: ",(0,r.jsx)(t.code,{children:'"5m"'})]}),"\n",(0,r.jsx)(t.h3,{id:"cache",children:(0,r.jsx)(t.code,{children:"cache"})}),"\n",(0,r.jsx)(t.p,{children:"A cache resource to use for request pagination."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"})]}),"\n",(0,r.jsx)(t.h3,{id:"cache_key",children:(0,r.jsx)(t.code,{children:"cache_key"})}),"\n",(0,r.jsx)(t.p,{children:"The key identifier used when storing the ID of the last tweet received."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"}),(0,r.jsx)(t.br,{}),"\n","Default: ",(0,r.jsx)(t.code,{children:'"last_tweet_id"'})]}),"\n",(0,r.jsx)(t.h3,{id:"rate_limit",children:(0,r.jsx)(t.code,{children:"rate_limit"})}),"\n",(0,r.jsx)(t.p,{children:"An optional rate limit resource to restrict API requests with."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"}),(0,r.jsx)(t.br,{}),"\n","Default: ",(0,r.jsx)(t.code,{children:'""'})]}),"\n",(0,r.jsx)(t.h3,{id:"api_key",children:(0,r.jsx)(t.code,{children:"api_key"})}),"\n",(0,r.jsxs)(t.p,{children:["An API key for OAuth 2.0 authentication. It is recommended that you populate this field using ",(0,r.jsx)(t.a,{href:"/docs/configuration/interpolation",children:"environment variables"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"})]}),"\n",(0,r.jsx)(t.h3,{id:"api_secret",children:(0,r.jsx)(t.code,{children:"api_secret"})}),"\n",(0,r.jsxs)(t.p,{children:["An API secret for OAuth 2.0 authentication. It is recommended that you populate this field using ",(0,r.jsx)(t.a,{href:"/docs/configuration/interpolation",children:"environment variables"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"})]})]})}function p(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},5162:function(e,t,n){n.d(t,{Z:function(){return a}});n(7294);var r=n(6010),i={tabItem:"tabItem_Ymn6"},s=n(5893);function a(e){let{children:t,hidden:n,className:a}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.Z)(i.tabItem,a),hidden:n,children:t})}},4866:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(7294),i=n(6010),s=n(2466),a=n(6550),l=n(469),c=n(1980),o=n(7392),d=n(12);function u(e){var t,n;return null!=(t=null==(n=r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=null!=t?t:function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:i}}=e;return{value:t,label:n,attributes:r,default:i}}))}(n);return function(e){const t=(0,o.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const i=(0,a.k6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,c._X)(s),(0,r.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(i.location.search);t.set(s,e),i.replace({...i.location,search:t.toString()})}),[s,i])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:i}=e,s=h(e),[a,c]=(0,r.useState)((()=>function(e){var t;let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+r.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}const i=null!=(t=r.find((e=>e.default)))?t:r[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:t,tabValues:s}))),[o,u]=f({queryString:n,groupId:i}),[m,x]=function(e){let{groupId:t}=e;const n=function(e){return e?"docusaurus.tab."+e:null}(t),[i,s]=(0,d.Nk)(n);return[i,(0,r.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:i}),b=(()=>{const e=null!=o?o:m;return p({value:e,tabValues:s})?e:null})();(0,l.Z)((()=>{b&&c(b)}),[b]);return{selectedValue:a,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error("Can't select invalid tab value="+e);c(e),u(e),x(e)}),[u,x,s]),tabValues:s}}var x=n(2389),b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"},v=n(5893);function j(e){let{className:t,block:n,selectedValue:r,selectValue:a,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:o}=(0,s.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),i=l[n].value;i!==r&&(o(t),a(i))},u=e=>{var t;let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{var r;const t=c.indexOf(e.currentTarget)+1;n=null!=(r=c[t])?r:c[0];break}case"ArrowLeft":{var i;const t=c.indexOf(e.currentTarget)-1;n=null!=(i=c[t])?i:c[c.length-1];break}}null==(t=n)||t.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},t),children:l.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>c.push(e),onKeyDown:u,onClick:d,...s,className:(0,i.Z)("tabs__item",b.tabItem,null==s?void 0:s.className,{"tabs__item--active":r===t}),children:null!=n?n:t},t)}))})}function w(e){let{lazy:t,children:n,selectedValue:i}=e;const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===i));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==i})))})}function g(e){const t=m(e);return(0,v.jsxs)("div",{className:(0,i.Z)("tabs-container",b.tabList),children:[(0,v.jsx)(j,{...e,...t}),(0,v.jsx)(w,{...e,...t})]})}function y(e){const t=(0,x.Z)();return(0,v.jsx)(g,{...e,children:u(e.children)},String(t))}},1151:function(e,t,n){n.d(t,{Z:function(){return l},a:function(){return a}});var r=n(7294);const i={},s=r.createContext(i);function a(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);