"use strict";(self.webpackChunkbento=self.webpackChunkbento||[]).push([[2561],{27788:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return i},default:function(){return h},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return d}});var r=n(85893),a=n(11151),o=n(74866),l=n(85162);const s={title:"retry",slug:"retry",type:"output",status:"stable",categories:["Utility"],name:"retry"},i=void 0,u={id:"components/outputs/retry",title:"retry",description:"\x3c!--",source:"@site/docs/components/outputs/retry.md",sourceDirName:"components/outputs",slug:"/components/outputs/retry",permalink:"/docs/components/outputs/retry",draft:!1,unlisted:!1,editUrl:"https://github.com/warpstreamlabs/bento/edit/main/website/docs/components/outputs/retry.md",tags:[],version:"current",frontMatter:{title:"retry",slug:"retry",type:"output",status:"stable",categories:["Utility"],name:"retry"},sidebar:"docs",previous:{title:"resource",permalink:"/docs/components/outputs/resource"},next:{title:"sftp",permalink:"/docs/components/outputs/sftp"}},c={},d=[{value:"Fields",id:"fields",level:2},{value:"<code>max_retries</code>",id:"max_retries",level:3},{value:"<code>backoff</code>",id:"backoff",level:3},{value:"<code>backoff.initial_interval</code>",id:"backoffinitial_interval",level:3},{value:"<code>backoff.max_interval</code>",id:"backoffmax_interval",level:3},{value:"<code>backoff.max_elapsed_time</code>",id:"backoffmax_elapsed_time",level:3},{value:"<code>output</code>",id:"output",level:3}];function p(e){const t={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Attempts to write messages to a child output and if the write fails for any reason the message is retried either until success or, if the retries or max elapsed time fields are non-zero, either is reached."}),"\n",(0,r.jsxs)(o.Z,{defaultValue:"common",values:[{label:"Common",value:"common"},{label:"Advanced",value:"advanced"}],children:[(0,r.jsx)(l.Z,{value:"common",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yml",children:'# Common config fields, showing default values\noutput:\n  label: ""\n  retry:\n    output: null # No default (required)\n'})})}),(0,r.jsx)(l.Z,{value:"advanced",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yml",children:'# All config fields, showing default values\noutput:\n  label: ""\n  retry:\n    max_retries: 0\n    backoff:\n      initial_interval: 500ms\n      max_interval: 3s\n      max_elapsed_time: 0s\n    output: null # No default (required)\n'})})})]}),"\n",(0,r.jsx)(t.p,{children:"All messages in Bento are always retried on an output error, but this would usually involve propagating the error back to the source of the message, whereby it would be reprocessed before reaching the output layer once again."}),"\n",(0,r.jsx)(t.p,{children:"This output type is useful whenever we wish to avoid reprocessing a message on the event of a failed send. We might, for example, have a dedupe processor that we want to avoid reapplying to the same message more than once in the pipeline."}),"\n",(0,r.jsxs)(t.p,{children:["Rather than retrying the same output you may wish to retry the send using a different output target (a dead letter queue). In which case you should instead use the ",(0,r.jsx)(t.a,{href:"/docs/components/outputs/fallback",children:(0,r.jsx)(t.code,{children:"fallback"})})," output type."]}),"\n",(0,r.jsx)(t.h2,{id:"fields",children:"Fields"}),"\n",(0,r.jsx)(t.h3,{id:"max_retries",children:(0,r.jsx)(t.code,{children:"max_retries"})}),"\n",(0,r.jsx)(t.p,{children:"The maximum number of retries before giving up on the request. If set to zero there is no discrete limit."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"int"}),(0,r.jsx)(t.br,{}),"\n","Default: ",(0,r.jsx)(t.code,{children:"0"})]}),"\n",(0,r.jsx)(t.h3,{id:"backoff",children:(0,r.jsx)(t.code,{children:"backoff"})}),"\n",(0,r.jsx)(t.p,{children:"Control time intervals between retry attempts."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"object"})]}),"\n",(0,r.jsx)(t.h3,{id:"backoffinitial_interval",children:(0,r.jsx)(t.code,{children:"backoff.initial_interval"})}),"\n",(0,r.jsx)(t.p,{children:"The initial period to wait between retry attempts."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"}),(0,r.jsx)(t.br,{}),"\n","Default: ",(0,r.jsx)(t.code,{children:'"500ms"'})]}),"\n",(0,r.jsx)(t.h3,{id:"backoffmax_interval",children:(0,r.jsx)(t.code,{children:"backoff.max_interval"})}),"\n",(0,r.jsx)(t.p,{children:"The maximum period to wait between retry attempts."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"}),(0,r.jsx)(t.br,{}),"\n","Default: ",(0,r.jsx)(t.code,{children:'"3s"'})]}),"\n",(0,r.jsx)(t.h3,{id:"backoffmax_elapsed_time",children:(0,r.jsx)(t.code,{children:"backoff.max_elapsed_time"})}),"\n",(0,r.jsx)(t.p,{children:"The maximum period to wait before retry attempts are abandoned. If zero then no limit is used."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"string"}),(0,r.jsx)(t.br,{}),"\n","Default: ",(0,r.jsx)(t.code,{children:'"0s"'})]}),"\n",(0,r.jsx)(t.h3,{id:"output",children:(0,r.jsx)(t.code,{children:"output"})}),"\n",(0,r.jsx)(t.p,{children:"A child output."}),"\n",(0,r.jsxs)(t.p,{children:["Type: ",(0,r.jsx)(t.code,{children:"output"})]})]})}function h(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},85162:function(e,t,n){n.d(t,{Z:function(){return l}});n(67294);var r=n(86010),a={tabItem:"tabItem_Ymn6"},o=n(85893);function l(e){let{children:t,hidden:n,className:l}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,l),hidden:n,children:t})}},74866:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(67294),a=n(86010),o=n(12466),l=n(16550),s=n(20469),i=n(91980),u=n(67392),c=n(50012);function d(e){var t,n;return null!=(t=null==(n=r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}function p(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=null!=t?t:function(e){return d(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}}))}(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const a=(0,l.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,i._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=p(e),[l,i]=(0,r.useState)((()=>function(e){var t;let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+r.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}const a=null!=(t=r.find((e=>e.default)))?t:r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[u,d]=f({queryString:n,groupId:a}),[m,b]=function(e){let{groupId:t}=e;const n=function(e){return e?"docusaurus.tab."+e:null}(t),[a,o]=(0,c.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),v=(()=>{const e=null!=u?u:m;return h({value:e,tabValues:o})?e:null})();(0,s.Z)((()=>{v&&i(v)}),[v]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error("Can't select invalid tab value="+e);i(e),d(e),b(e)}),[d,b,o]),tabValues:o}}var b=n(72389),v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"},x=n(85893);function y(e){let{className:t,block:n,selectedValue:r,selectValue:l,tabValues:s}=e;const i=[],{blockElementScrollPositionUntilNextRender:u}=(0,o.o5)(),c=e=>{const t=e.currentTarget,n=i.indexOf(t),a=s[n].value;a!==r&&(u(t),l(a))},d=e=>{var t;let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{var r;const t=i.indexOf(e.currentTarget)+1;n=null!=(r=i[t])?r:i[0];break}case"ArrowLeft":{var a;const t=i.indexOf(e.currentTarget)-1;n=null!=(a=i[t])?a:i[i.length-1];break}}null==(t=n)||t.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},t),children:s.map((e=>{let{value:t,label:n,attributes:o}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>i.push(e),onKeyDown:d,onClick:c,...o,className:(0,a.Z)("tabs__item",v.tabItem,null==o?void 0:o.className,{"tabs__item--active":r===t}),children:null!=n?n:t},t)}))})}function j(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})))})}function g(e){const t=m(e);return(0,x.jsxs)("div",{className:(0,a.Z)("tabs-container",v.tabList),children:[(0,x.jsx)(y,{...e,...t}),(0,x.jsx)(j,{...e,...t})]})}function w(e){const t=(0,b.Z)();return(0,x.jsx)(g,{...e,children:d(e.children)},String(t))}},11151:function(e,t,n){n.d(t,{Z:function(){return s},a:function(){return l}});var r=n(67294);const a={},o=r.createContext(a);function l(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);