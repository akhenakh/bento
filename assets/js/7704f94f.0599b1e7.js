"use strict";(self.webpackChunkbento=self.webpackChunkbento||[]).push([[4537],{28941:function(e,n,r){r.r(n),r.d(n,{assets:function(){return l},contentTitle:function(){return a},default:function(){return d},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return i}});var t=r(85893),o=r(11151);r(74866),r(85162);const s={title:"avro",slug:"avro",type:"processor",status:"beta",categories:["Parsing"],name:"avro"},a=void 0,c={id:"components/processors/avro",title:"avro",description:"\x3c!--",source:"@site/docs/components/processors/avro.md",sourceDirName:"components/processors",slug:"/components/processors/avro",permalink:"/bento/docs/components/processors/avro",draft:!1,unlisted:!1,editUrl:"https://github.com/warpstreamlabs/bento/edit/main/website/docs/components/processors/avro.md",tags:[],version:"current",frontMatter:{title:"avro",slug:"avro",type:"processor",status:"beta",categories:["Parsing"],name:"avro"},sidebar:"docs",previous:{title:"archive",permalink:"/bento/docs/components/processors/archive"},next:{title:"awk",permalink:"/bento/docs/components/processors/awk"}},l={},i=[{value:"Operators",id:"operators",level:2},{value:"<code>to_json</code>",id:"to_json",level:3},{value:"<code>from_json</code>",id:"from_json",level:3},{value:"Fields",id:"fields",level:2},{value:"<code>operator</code>",id:"operator",level:3},{value:"<code>encoding</code>",id:"encoding",level:3},{value:"<code>schema</code>",id:"schema",level:3},{value:"<code>schema_path</code>",id:"schema_path",level:3}];function u(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.admonition,{title:"BETA",type:"caution",children:(0,t.jsx)(n.p,{children:"This component is mostly stable but breaking changes could still be made outside of major version releases if a fundamental problem with the component is found."})}),"\n",(0,t.jsx)(n.p,{children:"Performs Avro based operations on messages based on a schema."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:'# Config fields, showing default values\nlabel: ""\navro:\n  operator: "" # No default (required)\n  encoding: textual\n  schema: ""\n  schema_path: ""\n'})}),"\n",(0,t.jsxs)(n.p,{children:["WARNING: If you are consuming or generating messages using a schema registry service then it is likely this processor will fail as those services require messages to be prefixed with the identifier of the schema version being used. Instead, try the ",(0,t.jsx)(n.a,{href:"/docs/components/processors/schema_registry_encode",children:(0,t.jsx)(n.code,{children:"schema_registry_encode"})})," and ",(0,t.jsx)(n.a,{href:"/docs/components/processors/schema_registry_decode",children:(0,t.jsx)(n.code,{children:"schema_registry_decode"})})," processors."]}),"\n",(0,t.jsx)(n.h2,{id:"operators",children:"Operators"}),"\n",(0,t.jsx)(n.h3,{id:"to_json",children:(0,t.jsx)(n.code,{children:"to_json"})}),"\n",(0,t.jsx)(n.p,{children:"Converts Avro documents into a JSON structure. This makes it easier to\nmanipulate the contents of the document within Bento. The encoding field\nspecifies how the source documents are encoded."}),"\n",(0,t.jsx)(n.h3,{id:"from_json",children:(0,t.jsx)(n.code,{children:"from_json"})}),"\n",(0,t.jsx)(n.p,{children:"Attempts to convert JSON documents into Avro documents according to the\nspecified encoding."}),"\n",(0,t.jsx)(n.h2,{id:"fields",children:"Fields"}),"\n",(0,t.jsx)(n.h3,{id:"operator",children:(0,t.jsx)(n.code,{children:"operator"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"#operators",children:"operator"})," to execute"]}),"\n",(0,t.jsxs)(n.p,{children:["Type: ",(0,t.jsx)(n.code,{children:"string"}),(0,t.jsx)(n.br,{}),"\n","Options: ",(0,t.jsx)(n.code,{children:"to_json"}),", ",(0,t.jsx)(n.code,{children:"from_json"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"encoding",children:(0,t.jsx)(n.code,{children:"encoding"})}),"\n",(0,t.jsx)(n.p,{children:"An Avro encoding format to use for conversions to and from a schema."}),"\n",(0,t.jsxs)(n.p,{children:["Type: ",(0,t.jsx)(n.code,{children:"string"}),(0,t.jsx)(n.br,{}),"\n","Default: ",(0,t.jsx)(n.code,{children:'"textual"'}),(0,t.jsx)(n.br,{}),"\n","Options: ",(0,t.jsx)(n.code,{children:"textual"}),", ",(0,t.jsx)(n.code,{children:"binary"}),", ",(0,t.jsx)(n.code,{children:"single"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"schema",children:(0,t.jsx)(n.code,{children:"schema"})}),"\n",(0,t.jsx)(n.p,{children:"A full Avro schema to use."}),"\n",(0,t.jsxs)(n.p,{children:["Type: ",(0,t.jsx)(n.code,{children:"string"}),(0,t.jsx)(n.br,{}),"\n","Default: ",(0,t.jsx)(n.code,{children:'""'})]}),"\n",(0,t.jsx)(n.h3,{id:"schema_path",children:(0,t.jsx)(n.code,{children:"schema_path"})}),"\n",(0,t.jsxs)(n.p,{children:["The path of a schema document to apply. Use either this or the ",(0,t.jsx)(n.code,{children:"schema"})," field."]}),"\n",(0,t.jsxs)(n.p,{children:["Type: ",(0,t.jsx)(n.code,{children:"string"}),(0,t.jsx)(n.br,{}),"\n","Default: ",(0,t.jsx)(n.code,{children:'""'})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:"# Examples\n\nschema_path: file://path/to/spec.avsc\n\nschema_path: http://localhost:8081/path/to/spec/versions/1\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},85162:function(e,n,r){r.d(n,{Z:function(){return a}});r(67294);var t=r(86010),o={tabItem:"tabItem_Ymn6"},s=r(85893);function a(e){let{children:n,hidden:r,className:a}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.Z)(o.tabItem,a),hidden:r,children:n})}},74866:function(e,n,r){r.d(n,{Z:function(){return _}});var t=r(67294),o=r(86010),s=r(12466),a=r(16550),c=r(20469),l=r(91980),i=r(67392),u=r(50012);function d(e){var n,r;return null!=(n=null==(r=t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:r.filter(Boolean))?n:[]}function h(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=null!=n?n:function(e){return d(e).map((e=>{let{props:{value:n,label:r,attributes:t,default:o}}=e;return{value:n,label:r,attributes:t,default:o}}))}(r);return function(e){const n=(0,i.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,r])}function p(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:r}=e;const o=(0,a.k6)(),s=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:n,groupId:r});return[(0,l._X)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(o.location.search);n.set(s,e),o.replace({...o.location,search:n.toString()})}),[s,o])]}function f(e){const{defaultValue:n,queryString:r=!1,groupId:o}=e,s=h(e),[a,l]=(0,t.useState)((()=>function(e){var n;let{defaultValue:r,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!p({value:r,tabValues:t}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+r+'" but none of its children has the corresponding value. Available values are: '+t.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return r}const o=null!=(n=t.find((e=>e.default)))?n:t[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:n,tabValues:s}))),[i,d]=m({queryString:r,groupId:o}),[f,v]=function(e){let{groupId:n}=e;const r=function(e){return e?"docusaurus.tab."+e:null}(n),[o,s]=(0,u.Nk)(r);return[o,(0,t.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:o}),b=(()=>{const e=null!=i?i:f;return p({value:e,tabValues:s})?e:null})();(0,c.Z)((()=>{b&&l(b)}),[b]);return{selectedValue:a,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error("Can't select invalid tab value="+e);l(e),d(e),v(e)}),[d,v,s]),tabValues:s}}var v=r(72389),b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"},x=r(85893);function j(e){let{className:n,block:r,selectedValue:t,selectValue:a,tabValues:c}=e;const l=[],{blockElementScrollPositionUntilNextRender:i}=(0,s.o5)(),u=e=>{const n=e.currentTarget,r=l.indexOf(n),o=c[r].value;o!==t&&(i(n),a(o))},d=e=>{var n;let r=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{var t;const n=l.indexOf(e.currentTarget)+1;r=null!=(t=l[n])?t:l[0];break}case"ArrowLeft":{var o;const n=l.indexOf(e.currentTarget)-1;r=null!=(o=l[n])?o:l[l.length-1];break}}null==(n=r)||n.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":r},n),children:c.map((e=>{let{value:n,label:r,attributes:s}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>l.push(e),onKeyDown:d,onClick:u,...s,className:(0,o.Z)("tabs__item",b.tabItem,null==s?void 0:s.className,{"tabs__item--active":t===n}),children:null!=r?r:n},n)}))})}function g(e){let{lazy:n,children:r,selectedValue:o}=e;const s=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===o));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==o})))})}function y(e){const n=f(e);return(0,x.jsxs)("div",{className:(0,o.Z)("tabs-container",b.tabList),children:[(0,x.jsx)(j,{...e,...n}),(0,x.jsx)(g,{...e,...n})]})}function _(e){const n=(0,v.Z)();return(0,x.jsx)(y,{...e,children:d(e.children)},String(n))}},11151:function(e,n,r){r.d(n,{Z:function(){return c},a:function(){return a}});var t=r(67294);const o={},s=t.createContext(o);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);